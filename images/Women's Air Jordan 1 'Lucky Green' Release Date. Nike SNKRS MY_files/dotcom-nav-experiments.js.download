!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=84)}([function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){exports.LOG_LEVEL={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},exports.ERROR_MESSAGES={EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_KEY:"%s: Event key %s is not in datafile.",INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",JSON_SCHEMA_EXPECTED:"%s: JSON schema expected.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s"},exports.LOG_MESSAGES={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_NOT_ASSOCIATED_WITH_EXPERIMENTS:"%s: Event %s is not associated with any running experiments.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",NOT_TRACKING_USER_FOR_EXPERIMENT:"%s: Not tracking user %s for experiment %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is in "Launched" state. Not activating user.',SHOULD_NOT_DISPATCH_TRACK:'%s: Experiment %s is in "Launched" state. Not tracking user for it.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",USER_ASSIGNED_TO_VARIATION_BUCKET:"%s: Assigned variation bucket %s to user %s.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned experiment bucket %s to user %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s bucketed into everyone targeting rule.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',USER_RECEIVED_VARIABLE_VALUE:'%s: Value for variable "%s" of feature flag "%s" is %s for user "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId"},exports.RESERVED_EVENT_KEYWORDS={REVENUE:"revenue",VALUE:"value"},exports.CONTROL_ATTRIBUTES={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent"},exports.JAVASCRIPT_CLIENT_ENGINE="javascript-sdk",exports.NODE_CLIENT_ENGINE="node-sdk",exports.NODE_CLIENT_VERSION="2.3.1",exports.NOTIFICATION_TYPES={ACTIVATE:"ACTIVATE:experiment, user_id,attributes, variation, event",TRACK:"TRACK:event_key, user_id, attributes, event_tags, event"},exports.DECISION_SOURCES={EXPERIMENT:"experiment",ROLLOUT:"rollout"},exports.FEATURE_VARIABLE_TYPES={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string"},exports.DATAFILE_VERSIONS={V2:"2",V3:"3",V4:"4"}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(51),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var re={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(key){return function(parse_tree,argv){var arg,i,k,ph,pad,pad_character,pad_length,is_positive,sign,cursor=1,tree_length=parse_tree.length,output="";for(i=0;i<tree_length;i++)if("string"==typeof parse_tree[i])output+=parse_tree[i];else if("object"==typeof parse_tree[i]){if((ph=parse_tree[i]).keys)for(arg=argv[cursor],k=0;k<ph.keys.length;k++){if(null==arg)throw new Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',ph.keys[k],ph.keys[k-1]));arg=arg[ph.keys[k]]}else arg=ph.param_no?argv[ph.param_no]:argv[cursor++];if(re.not_type.test(ph.type)&&re.not_primitive.test(ph.type)&&arg instanceof Function&&(arg=arg()),re.numeric_arg.test(ph.type)&&"number"!=typeof arg&&isNaN(arg))throw new TypeError(sprintf("[sprintf] expecting number but found %T",arg));switch(re.number.test(ph.type)&&(is_positive=0<=arg),ph.type){case"b":arg=parseInt(arg,10).toString(2);break;case"c":arg=String.fromCharCode(parseInt(arg,10));break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,ph.width?parseInt(ph.width):0);break;case"e":arg=ph.precision?parseFloat(arg).toExponential(ph.precision):parseFloat(arg).toExponential();break;case"f":arg=ph.precision?parseFloat(arg).toFixed(ph.precision):parseFloat(arg);break;case"g":arg=ph.precision?String(Number(arg.toPrecision(ph.precision))):parseFloat(arg);break;case"o":arg=(parseInt(arg,10)>>>0).toString(8);break;case"s":arg=String(arg),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"t":arg=String(!!arg),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"T":arg=Object.prototype.toString.call(arg).slice(8,-1).toLowerCase(),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"u":arg=parseInt(arg,10)>>>0;break;case"v":arg=arg.valueOf(),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"x":arg=(parseInt(arg,10)>>>0).toString(16);break;case"X":arg=(parseInt(arg,10)>>>0).toString(16).toUpperCase()}re.json.test(ph.type)?output+=arg:(!re.number.test(ph.type)||is_positive&&!ph.sign?sign="":(sign=is_positive?"+":"-",arg=arg.toString().replace(re.sign,"")),pad_character=ph.pad_char?"0"===ph.pad_char?"0":ph.pad_char.charAt(1):" ",pad_length=ph.width-(sign+arg).length,pad=ph.width&&0<pad_length?pad_character.repeat(pad_length):"",output+=ph.align?sign+arg+pad:"0"===pad_character?sign+pad+arg:pad+sign+arg)}return output}(function(fmt){if(sprintf_cache[fmt])return sprintf_cache[fmt];var match,_fmt=fmt,parse_tree=[],arg_names=0;for(;_fmt;){if(null!==(match=re.text.exec(_fmt)))parse_tree.push(match[0]);else if(null!==(match=re.modulo.exec(_fmt)))parse_tree.push("%");else{if(null===(match=re.placeholder.exec(_fmt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=re.key.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=re.key_access.exec(replacement_field)))field_list.push(field_match[1]);else{if(null===(field_match=re.index_access.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");parse_tree.push({placeholder:match[0],param_no:match[1],keys:match[2],sign:match[3],pad_char:match[4],align:match[5],width:match[6],precision:match[7],type:match[8]})}_fmt=_fmt.substring(match[0].length)}return sprintf_cache[fmt]=parse_tree}(key),arguments)}function vsprintf(fmt,argv){return sprintf.apply(null,[fmt].concat(argv||[]))}var sprintf_cache=Object.create(null);exports.sprintf=sprintf,exports.vsprintf=vsprintf,"undefined"!=typeof window&&(window.sprintf=sprintf,window.vsprintf=vsprintf,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return{sprintf:sprintf,vsprintf:vsprintf}}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},function(module,exports,__webpack_require__){var uuid=__webpack_require__(86);module.exports={assign:__webpack_require__(89),assignIn:__webpack_require__(110),cloneDeep:__webpack_require__(113),currentTimestamp:function(){return Math.round((new Date).getTime())},isArray:__webpack_require__(0),isEmpty:__webpack_require__(160),keyBy:__webpack_require__(161),filter:__webpack_require__(194),forEach:__webpack_require__(196),forOwn:__webpack_require__(74),map:__webpack_require__(197),reduce:__webpack_require__(199),uuid:function(){return uuid.v4()},values:__webpack_require__(202)}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(90),getValue=__webpack_require__(96);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(50),isLength=__webpack_require__(28);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(54),baseKeys=__webpack_require__(55),isArrayLike=__webpack_require__(7);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(26),baseAssignValue=__webpack_require__(27);module.exports=function(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}},function(module,exports,__webpack_require__){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */exports.parse=function(str,options){if("string"!=typeof str)throw new TypeError("argument str must be a string");for(var obj={},opt=options||{},pairs=str.split(pairSplitRegExp),dec=opt.decode||decode,i=0;i<pairs.length;i++){var pair=pairs[i],eq_idx=pair.indexOf("=");if(!(eq_idx<0)){var key=pair.substr(0,eq_idx).trim(),val=pair.substr(++eq_idx,pair.length).trim();'"'==val[0]&&(val=val.slice(1,-1)),null==obj[key]&&(obj[key]=tryDecode(val,dec))}}return obj},exports.serialize=function(name,val,options){var opt=options||{},enc=opt.encode||encode;if("function"!=typeof enc)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(name))throw new TypeError("argument name is invalid");var value=enc(val);if(value&&!fieldContentRegExp.test(value))throw new TypeError("argument val is invalid");var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge))throw new Error("maxAge should be a Number");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain))throw new TypeError("option domain is invalid");str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path))throw new TypeError("option path is invalid");str+="; Path="+opt.path}if(opt.expires){if("function"!=typeof opt.expires.toUTCString)throw new TypeError("option expires is invalid");str+="; Expires="+opt.expires.toUTCString()}opt.httpOnly&&(str+="; HttpOnly");opt.secure&&(str+="; Secure");if(opt.sameSite){switch("string"==typeof opt.sameSite?opt.sameSite.toLowerCase():opt.sameSite){case!0:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return str};var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),getRawTag=__webpack_require__(92),objectToString=__webpack_require__(93),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(2).Symbol;module.exports=Symbol},function(module,exports){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(144),Map=__webpack_require__(37),Promise=__webpack_require__(145),Set=__webpack_require__(146),WeakMap=__webpack_require__(147),baseGetTag=__webpack_require__(12),toSource=__webpack_require__(52),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(66),baseEach=__webpack_require__(167)(baseForOwn);module.exports=baseEach},function(module,exports){module.exports=function(value,other){return value===other||value!=value&&other!=other}},function(module,exports){module.exports=function(value){return value}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(2),stubFalse=__webpack_require__(107),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(31)(module))},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(115),listCacheDelete=__webpack_require__(116),listCacheGet=__webpack_require__(117),listCacheHas=__webpack_require__(118),listCacheSet=__webpack_require__(119);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(17);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(5)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(133);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){var baseMatches=__webpack_require__(168),baseMatchesProperty=__webpack_require__(181),identity=__webpack_require__(18),isArray=__webpack_require__(0),property=__webpack_require__(191);module.exports=function(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(42);module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(27),eq=__webpack_require__(17),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(49);module.exports=function(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},function(module,exports){module.exports=function(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991}},function(module,exports){var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(106),isObjectLike=__webpack_require__(9),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(108),baseUnary=__webpack_require__(33),nodeUtil=__webpack_require__(34),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports){module.exports=function(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(51),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(31)(module))},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(54),baseKeysIn=__webpack_require__(111),isArrayLike=__webpack_require__(7);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(20),stackClear=__webpack_require__(120),stackDelete=__webpack_require__(121),stackGet=__webpack_require__(122),stackHas=__webpack_require__(123),stackSet=__webpack_require__(124);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports,__webpack_require__){var Map=__webpack_require__(5)(__webpack_require__(2),"Map");module.exports=Map},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(125),mapCacheDelete=__webpack_require__(132),mapCacheGet=__webpack_require__(134),mapCacheHas=__webpack_require__(135),mapCacheSet=__webpack_require__(136);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(58),stubArray=__webpack_require__(59),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray;module.exports=getSymbols},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(65);module.exports=function(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(0),isSymbol=__webpack_require__(42),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObjectLike=__webpack_require__(9);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var fns=__webpack_require__(4),enums=__webpack_require__(1),sprintf=__webpack_require__(3).sprintf,MODULE_NAME="PROJECT_CONFIG",ERROR_MESSAGES=enums.ERROR_MESSAGES,LOG_MESSAGES=enums.LOG_MESSAGES,LOG_LEVEL=enums.LOG_LEVEL,FEATURE_VARIABLE_TYPES=enums.FEATURE_VARIABLE_TYPES;module.exports={createProjectConfig:function(datafile){var experiments,projectConfig=fns.cloneDeep(datafile);return fns.forEach(projectConfig.audiences,function(audience){audience.conditions=JSON.parse(audience.conditions)}),projectConfig.attributeKeyMap=fns.keyBy(projectConfig.attributes,"key"),projectConfig.eventKeyMap=fns.keyBy(projectConfig.events,"key"),projectConfig.groupIdMap=fns.keyBy(projectConfig.groups,"id"),fns.forEach(projectConfig.groupIdMap,function(group,Id){experiments=fns.cloneDeep(group.experiments),fns.forEach(experiments,function(experiment){projectConfig.experiments.push(fns.assignIn(experiment,{groupId:Id}))})}),projectConfig.rolloutIdMap=fns.keyBy(projectConfig.rollouts||[],"id"),fns.forOwn(projectConfig.rolloutIdMap,function(rollout){fns.forEach(rollout.experiments||[],function(experiment){projectConfig.experiments.push(fns.cloneDeep(experiment)),experiment.variationKeyMap=fns.keyBy(experiment.variations,"key")})}),projectConfig.experimentKeyMap=fns.keyBy(projectConfig.experiments,"key"),projectConfig.experimentIdMap=fns.keyBy(projectConfig.experiments,"id"),projectConfig.variationIdMap={},projectConfig.variationVariableUsageMap={},fns.forEach(projectConfig.experiments,function(experiment){experiment.variationKeyMap=fns.keyBy(experiment.variations,"key"),fns.assignIn(projectConfig.variationIdMap,fns.keyBy(experiment.variations,"id")),fns.forOwn(experiment.variationKeyMap,function(variation){variation.variables&&(projectConfig.variationVariableUsageMap[variation.id]=fns.keyBy(variation.variables,"id"))})}),projectConfig.forcedVariationMap={},projectConfig.featureKeyMap=fns.keyBy(projectConfig.featureFlags||[],"key"),fns.forOwn(projectConfig.featureKeyMap,function(feature){feature.variableKeyMap=fns.keyBy(feature.variables,"key"),fns.forEach(feature.experimentIds||[],function(experimentId){var experimentInFeature=projectConfig.experimentIdMap[experimentId];if(experimentInFeature.groupId)return feature.groupId=experimentInFeature.groupId,!1})}),projectConfig},getExperimentId:function(projectConfig,experimentKey){var experiment=projectConfig.experimentKeyMap[experimentKey];if(fns.isEmpty(experiment))throw new Error(sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_KEY,MODULE_NAME,experimentKey));return experiment.id},getLayerId:function(projectConfig,experimentId){var experiment=projectConfig.experimentIdMap[experimentId];if(fns.isEmpty(experiment))throw new Error(sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_ID,MODULE_NAME,experimentId));return experiment.layerId},getAttributeId:function(projectConfig,attributeKey,logger){var attribute=projectConfig.attributeKeyMap[attributeKey],hasReservedPrefix=0===attributeKey.indexOf("$opt_");return attribute?(hasReservedPrefix&&logger.log(LOG_LEVEL.WARN,sprintf("Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",attributeKey,"$opt_")),attribute.id):hasReservedPrefix?attributeKey:(logger.log(LOG_LEVEL.DEBUG,sprintf(ERROR_MESSAGES.UNRECOGNIZED_ATTRIBUTE,MODULE_NAME,attributeKey)),null)},getEventId:function(projectConfig,eventKey){var event=projectConfig.eventKeyMap[eventKey];return event?event.id:null},getExperimentStatus:function(projectConfig,experimentKey){var experiment=projectConfig.experimentKeyMap[experimentKey];if(fns.isEmpty(experiment))throw new Error(sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_KEY,MODULE_NAME,experimentKey));return experiment.status},isActive:function(projectConfig,experimentKey){return"Running"===module.exports.getExperimentStatus(projectConfig,experimentKey)||"Launched"===module.exports.getExperimentStatus(projectConfig,experimentKey)},isRunning:function(projectConfig,experimentKey){return"Running"===module.exports.getExperimentStatus(projectConfig,experimentKey)},getAudiencesForExperiment:function(projectConfig,experimentKey){var experiment=projectConfig.experimentKeyMap[experimentKey];if(fns.isEmpty(experiment))throw new Error(sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_KEY,MODULE_NAME,experimentKey));var audienceIds=experiment.audienceIds;return fns.filter(projectConfig.audiences,function(audience){return-1!==audienceIds.indexOf(audience.id)})},getVariationKeyFromId:function(projectConfig,variationId){return projectConfig.variationIdMap.hasOwnProperty(variationId)?projectConfig.variationIdMap[variationId].key:null},getVariationIdFromExperimentAndVariationKey:function(projectConfig,experimentKey,variationKey){var experiment=projectConfig.experimentKeyMap[experimentKey];return experiment.variationKeyMap.hasOwnProperty(variationKey)?experiment.variationKeyMap[variationKey].id:null},getExperimentFromKey:function(projectConfig,experimentKey){if(projectConfig.experimentKeyMap.hasOwnProperty(experimentKey)){var experiment=projectConfig.experimentKeyMap[experimentKey];if(experiment)return experiment}throw new Error(sprintf(ERROR_MESSAGES.EXPERIMENT_KEY_NOT_IN_DATAFILE,MODULE_NAME,experimentKey))},getExperimentIdsForEvent:function(projectConfig,eventKey){var event=projectConfig.eventKeyMap[eventKey];if(event)return 0<event.experimentIds.length?event.experimentIds:null;throw new Error(sprintf(ERROR_MESSAGES.INVALID_EVENT_KEY,MODULE_NAME,eventKey))},getTrafficAllocation:function(projectConfig,experimentKey){var experiment=projectConfig.experimentKeyMap[experimentKey];if(fns.isEmpty(experiment))throw new Error(sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_KEY,MODULE_NAME,experimentKey));return experiment.trafficAllocation},removeForcedVariation:function(projectConfig,userId,experimentId,experimentKey,logger){if(!userId)throw new Error(sprintf(ERROR_MESSAGES.INVALID_USER_ID,MODULE_NAME));if(!projectConfig.forcedVariationMap.hasOwnProperty(userId))throw new Error(sprintf(ERROR_MESSAGES.USER_NOT_IN_FORCED_VARIATION,MODULE_NAME,userId));delete projectConfig.forcedVariationMap[userId][experimentId],logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.VARIATION_REMOVED_FOR_USER,MODULE_NAME,experimentKey,userId))},setInForcedVariationMap:function(projectConfig,userId,experimentId,variationId,logger){if(!userId)throw new Error(sprintf(ERROR_MESSAGES.INVALID_USER_ID,MODULE_NAME));projectConfig.forcedVariationMap.hasOwnProperty(userId)||(projectConfig.forcedVariationMap[userId]={}),projectConfig.forcedVariationMap[userId][experimentId]=variationId,logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_MAPPED_TO_FORCED_VARIATION,MODULE_NAME,variationId,experimentId,userId))},getForcedVariation:function(projectConfig,experimentKey,userId,logger){var experimentId,experimentToVariationMap=projectConfig.forcedVariationMap[userId];if(!experimentToVariationMap)return logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_HAS_NO_FORCED_VARIATION,MODULE_NAME,userId)),null;try{var experiment=this.getExperimentFromKey(projectConfig,experimentKey);if(!experiment.hasOwnProperty("id"))return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.IMPROPERLY_FORMATTED_EXPERIMENT,MODULE_NAME,experimentKey)),null;experimentId=experiment.id}catch(ex){return logger.log(LOG_LEVEL.ERROR,ex.message),null}var variationId=experimentToVariationMap[experimentId];if(!variationId)return logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,MODULE_NAME,experimentKey,userId)),null;var variationKey=this.getVariationKeyFromId(projectConfig,variationId);return logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_HAS_FORCED_VARIATION,MODULE_NAME,variationKey,experimentKey,userId)),variationKey},setForcedVariation:function(projectConfig,experimentKey,userId,variationKey,logger){var experimentId;try{var experiment=this.getExperimentFromKey(projectConfig,experimentKey);if(!experiment.hasOwnProperty("id"))return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.IMPROPERLY_FORMATTED_EXPERIMENT,MODULE_NAME,experimentKey)),!1;experimentId=experiment.id}catch(ex){return logger.log(LOG_LEVEL.ERROR,ex.message),!1}if(!variationKey)try{return this.removeForcedVariation(projectConfig,userId,experimentId,experimentKey,logger),!0}catch(ex){return logger.log(LOG_LEVEL.ERROR,ex.message),!1}var variationId=this.getVariationIdFromExperimentAndVariationKey(projectConfig,experimentKey,variationKey);if(!variationId)return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.NO_VARIATION_FOR_EXPERIMENT_KEY,MODULE_NAME,variationKey,experimentKey)),!1;try{return this.setInForcedVariationMap(projectConfig,userId,experimentId,variationId,logger),!0}catch(ex){return logger.log(LOG_LEVEL.ERROR,ex.message),!1}},getExperimentFromId:function(projectConfig,experimentId,logger){if(projectConfig.experimentIdMap.hasOwnProperty(experimentId)){var experiment=projectConfig.experimentIdMap[experimentId];if(experiment)return experiment}return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_ID,MODULE_NAME,experimentId)),null},getFeatureFromKey:function(projectConfig,featureKey,logger){if(projectConfig.featureKeyMap.hasOwnProperty(featureKey)){var feature=projectConfig.featureKeyMap[featureKey];if(feature)return feature}return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.FEATURE_NOT_IN_DATAFILE,MODULE_NAME,featureKey)),null},getVariableForFeature:function(projectConfig,featureKey,variableKey,logger){var feature=projectConfig.featureKeyMap[featureKey];if(!feature)return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.FEATURE_NOT_IN_DATAFILE,MODULE_NAME,featureKey)),null;var variable=feature.variableKeyMap[variableKey];return variable||(logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.VARIABLE_KEY_NOT_IN_DATAFILE,MODULE_NAME,variableKey,featureKey)),null)},getVariableValueForVariation:function(projectConfig,variable,variation,logger){if(!variable||!variation)return null;if(!projectConfig.variationVariableUsageMap.hasOwnProperty(variation.id))return logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,MODULE_NAME,variation.id)),null;var variableUsage=projectConfig.variationVariableUsageMap[variation.id][variable.id];return variableUsage?variableUsage.value:variable.defaultValue},getTypeCastValue:function(variableValue,variableType,logger){var castValue;switch(variableType){case FEATURE_VARIABLE_TYPES.BOOLEAN:castValue="true"!==variableValue&&"false"!==variableValue?(logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,MODULE_NAME,variableValue,variableType)),null):"true"===variableValue;break;case FEATURE_VARIABLE_TYPES.INTEGER:castValue=parseInt(variableValue,10),isNaN(castValue)&&(logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,MODULE_NAME,variableValue,variableType)),castValue=null);break;case FEATURE_VARIABLE_TYPES.DOUBLE:castValue=parseFloat(variableValue),isNaN(castValue)&&(logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,MODULE_NAME,variableValue,variableType)),castValue=null);break;default:castValue=variableValue}return castValue}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var obj,_extend2=__webpack_require__(79),_extend3=(obj=_extend2)&&obj.__esModule?obj:{default:obj};var ExperimentException=function(){function ExperimentException(message,experiment,experimentManager){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExperimentException);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExperimentException.__proto__||Object.getPrototypeOf(ExperimentException)).call(this,message));return _this.message=message,_this.experiment=experiment,_this.experimentManager=experimentManager,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExperimentException,(0,_extend3.default)(Error)),_createClass(ExperimentException,[{key:"name",get:function(){return this.constructor.name}}]),ExperimentException}();exports.default=ExperimentException},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen};void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return ExecutionEnvironment}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(5),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObject=__webpack_require__(6);module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(91))},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(97),isIterateeCall=__webpack_require__(104);module.exports=function(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0;for(customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(105),isArguments=__webpack_require__(30),isArray=__webpack_require__(0),isBuffer=__webpack_require__(19),isIndex=__webpack_require__(29),isTypedArray=__webpack_require__(32),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(14),nativeKeys=__webpack_require__(109),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function(){return[]}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(61),getPrototype=__webpack_require__(62),getSymbols=__webpack_require__(39),stubArray=__webpack_require__(59),getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray;module.exports=getSymbolsIn},function(module,exports){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var getPrototype=__webpack_require__(56)(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(64),getSymbols=__webpack_require__(39),keys=__webpack_require__(8);module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(61),isArray=__webpack_require__(0);module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(2).Uint8Array;module.exports=Uint8Array},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(165),keys=__webpack_require__(8);module.exports=function(object,iteratee){return object&&baseFor(object,iteratee,keys)}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(170),isObjectLike=__webpack_require__(9);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(171),arraySome=__webpack_require__(174),cacheHas=__webpack_require__(175);module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&arrLength<othLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(6);module.exports=function(value){return value==value&&!isObject(value)}},function(module,exports){module.exports=function(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}},function(module,exports,__webpack_require__){var castPath=__webpack_require__(72),toKey=__webpack_require__(25);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(0),isKey=__webpack_require__(41),stringToPath=__webpack_require__(183),toString=__webpack_require__(186);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var identity=__webpack_require__(18);module.exports=function(value){return"function"==typeof value?value:identity}},function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(66),castFunction=__webpack_require__(73);module.exports=function(object,iteratee){return object&&baseForOwn(object,castFunction(iteratee))}},function(module,exports,__webpack_require__){var sprintf=__webpack_require__(3).sprintf,ERROR_MESSAGES=__webpack_require__(1).ERROR_MESSAGES,MODULE_NAME="CONFIG_VALIDATOR",DATAFILE_VERSIONS=__webpack_require__(1).DATAFILE_VERSIONS,SUPPORTED_VERSIONS=[DATAFILE_VERSIONS.V2,DATAFILE_VERSIONS.V3,DATAFILE_VERSIONS.V4];module.exports={validate:function(config){if(config.errorHandler&&"function"!=typeof config.errorHandler.handleError)throw new Error(sprintf(ERROR_MESSAGES.INVALID_ERROR_HANDLER,MODULE_NAME));if(config.eventDispatcher&&"function"!=typeof config.eventDispatcher.dispatchEvent)throw new Error(sprintf(ERROR_MESSAGES.INVALID_EVENT_DISPATCHER,MODULE_NAME));if(config.logger&&"function"!=typeof config.logger.log)throw new Error(sprintf(ERROR_MESSAGES.INVALID_LOGGER,MODULE_NAME));return!0},validateDatafile:function(datafile){if(!datafile)throw new Error(sprintf(ERROR_MESSAGES.NO_DATAFILE_SPECIFIED,MODULE_NAME));if("string"==typeof datafile||datafile instanceof String)try{datafile=JSON.parse(datafile)}catch(ex){throw new Error(sprintf(ERROR_MESSAGES.INVALID_DATAFILE_MALFORMED,MODULE_NAME))}if(-1===SUPPORTED_VERSIONS.indexOf(datafile.version))throw new Error(sprintf(ERROR_MESSAGES.INVALID_DATAFILE_VERSION,MODULE_NAME,datafile.version));return!0}}},function(module,exports,__webpack_require__){var sprintf=__webpack_require__(3).sprintf,lodashForOwn=__webpack_require__(74),ERROR_MESSAGES=__webpack_require__(1).ERROR_MESSAGES,VALID_ATTRIBUTE_TYPES=["string","boolean","number"];module.exports={validate:function(attributes){if("object"!=typeof attributes||Array.isArray(attributes)||null===attributes)throw new Error(sprintf(ERROR_MESSAGES.INVALID_ATTRIBUTES,"ATTRIBUTES_VALIDATOR"));return lodashForOwn(attributes,function(value,key){if(void 0===value)throw new Error(sprintf(ERROR_MESSAGES.UNDEFINED_ATTRIBUTE,"ATTRIBUTES_VALIDATOR",key))}),!0},isAttributeValid:function(attributeKey,attributeValue){return"string"==typeof attributeKey&&-1!==VALID_ATTRIBUTE_TYPES.indexOf(typeof attributeValue)}}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function(target,source){return Object.keys(source).reduce(function(acc,key){return acc[key]=source[key],acc},target)},compact:function(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function(queue){for(var obj;queue.length;){var item=queue.pop();if(obj=item.obj[item.prop],Array.isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}return obj}(queue)},decode:function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}},encode:function(str){if(0===str.length)return str;for(var string="string"==typeof str?str:String(str),out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||48<=c&&c<=57||65<=c&&c<=90||97<=c&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||57344<=c?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function(obj){return null!=obj&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(Array.isArray(target))target.push(source);else{if("object"!=typeof target)return[target,source];!options.plainObjects&&!options.allowPrototypes&&has.call(Object.prototype,source)||(target[source]=!0)}return target}if("object"!=typeof target)return[target].concat(source);var mergeTarget=target;return Array.isArray(target)&&!Array.isArray(source)&&(mergeTarget=arrayToObject(target,options)),Array.isArray(target)&&Array.isArray(source)?(source.forEach(function(item,i){has.call(target,i)?target[i]&&"object"==typeof target[i]?target[i]=merge(target[i],item,options):target.push(item):target[i]=item}),target):Object.keys(source).reduce(function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)}}},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g;module.exports={default:"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(cls){function ExtendableBuiltin(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];cls.apply(this,args)}return ExtendableBuiltin.prototype=Object.create(cls.prototype),Object.setPrototypeOf(ExtendableBuiltin,cls),ExtendableBuiltin}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(env){function consoleLogMethod(type){return function(message,optimizelyMessage){return"prod"===env?null:console[type]("[dotcom-nav-experiments] "+(optimizelyMessage||message))}}return{warn:consoleLogMethod("warn"),info:consoleLogMethod("info"),error:consoleLogMethod("error"),log:consoleLogMethod("log"),debug:consoleLogMethod("debug")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var index_browser=__webpack_require__(82),index_browser_default=__webpack_require__.n(index_browser),exenv=__webpack_require__(46),node_modules_cookie=__webpack_require__(11);function readCookie(value,options){void 0===options&&(options={});var cleanValue=function(value){if(value&&"j"===value[0]&&":"===value[1])return value.substr(2);return value}(value);if(function(value,doNotParse){return void 0===doNotParse&&(doNotParse=!value||"{"!==value[0]&&"["!==value[0]&&'"'!==value[0]),!doNotParse}(cleanValue,options.doNotParse))try{return JSON.parse(cleanValue)}catch(e){}return value}var objectAssign=__webpack_require__(220);function Cookies(cookies){this.changeListeners=[],this.TESTING_ONETWO=2,this.cookies=function(cookies){return"string"==typeof cookies?node_modules_cookie.parse(cookies):"object"==typeof cookies&&null!==cookies?cookies:{}}(cookies),this.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie}var es6=(Cookies.prototype._updateBrowserValues=function(){this.HAS_DOCUMENT_COOKIE&&(this.cookies=node_modules_cookie.parse(document.cookie))},Cookies.prototype._emitChange=function(params){for(var i=0;i<this.changeListeners.length;++i)this.changeListeners[i](params)},Cookies.prototype.get=function(name,options){return void 0===options&&(options={}),this._updateBrowserValues(),readCookie(this.cookies[name],options)},Cookies.prototype.getAll=function(options){void 0===options&&(options={}),this._updateBrowserValues();var result={};for(var name_1 in this.cookies)result[name_1]=readCookie(this.cookies[name_1],options);return result},Cookies.prototype.set=function(name,value,options){var _a;"object"==typeof value&&(value=JSON.stringify(value)),this.cookies=objectAssign({},this.cookies,((_a={})[name]=value,_a)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=node_modules_cookie.serialize(name,value,options)),this._emitChange({name:name,value:value,options:options})},Cookies.prototype.remove=function(name,options){var finalOptions=options=objectAssign({},options,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=objectAssign({},this.cookies),delete this.cookies[name],this.HAS_DOCUMENT_COOKIE&&(document.cookie=node_modules_cookie.serialize(name,"",finalOptions)),this._emitChange({name:name,value:void 0,options:options})},Cookies.prototype.addChangeListener=function(callback){this.changeListeners.push(callback)},Cookies.prototype.removeChangeListener=function(callback){var idx=this.changeListeners.indexOf(callback);0<=idx&&this.changeListeners.splice(idx,1)},Cookies),lib=__webpack_require__(83),lib_default=__webpack_require__.n(lib);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function util_getOptimizelyUserId(cookie){return new es6(exenv.canUseDOM?void 0:cookie).get("anonymousId")}function util_getForcedVariant(experiment,forcePreview,optimizelyClient){var params=forcePreview||exenv.canUseDOM&&lib_default.a.parse(document.location.search,{allowDots:!0,ignoreQueryPrefix:!0}),forcedVariant=params&&params.opxp&&params.opxp[experiment];return optimizelyClient?sanitizeForcedVariant(forcedVariant,experiment,optimizelyClient):forcedVariant}function util_getExperimentDriver(datafile,argument_1){var props=1<arguments.length&&void 0!==argument_1?argument_1:{};return index_browser_default.a.createInstance(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}({datafile:datafile,skipJSONValidation:!0},props))}var mapExperimentKeys=function(exp){return exp.key},getExperiments=function(datafile,argument_1){var filterExperiments=1<arguments.length&&void 0!==argument_1?argument_1:null,experiments=[];try{return experiments=_toConsumableArray(datafile.experiments),datafile.groups.forEach(function(group){experiments=[].concat(_toConsumableArray(experiments),_toConsumableArray(group.experiments))}),filterExperiments?experiments.filter(filterExperiments):experiments}catch(e){return experiments}},sanitizeVariant=function(forcedVariant,experimentKey,optimizelyClient){if(forcedVariant&&optimizelyClient&&optimizelyClient.configObj){var experiment=function(){for(var experiments=getExperiments(optimizelyClient.configObj),i=0;i<experiments.length;i+=1)if(experiments[i].key===experimentKey)return experiments[i]}();if(!experiment)return;var qualifiedVariants=experiment.variations.map(function(variant){return variant.key.toUpperCase()});return-1<qualifiedVariants.indexOf(forcedVariant.toUpperCase())?qualifiedVariants[qualifiedVariants.indexOf(forcedVariant.toUpperCase())]:void 0}},sanitizeForcedVariant=sanitizeVariant,getVariation=function(optClient,experiment,argument_2,argument_3,argument_4,argument_5,argument_6){var user=2<arguments.length&&void 0!==argument_2?argument_2:util_getOptimizelyUserId(),attributes=3<arguments.length?argument_3:void 0,activate=!(4<arguments.length&&void 0!==argument_4)||argument_4,gfv=5<arguments.length&&void 0!==argument_5?argument_5:util_getForcedVariant,sanitize=!(6<arguments.length&&void 0!==argument_6)||argument_6,forcedVariant=gfv&&"function"==typeof gfv&&gfv(experiment,void 0,sanitize&&optClient);return forcedVariant?(optClient.setForcedVariation(experiment,user,forcedVariant),forcedVariant):optClient[("function"==typeof activate?activate(optClient,experiment,user,attributes,activate,gfv,sanitize):activate)?"activate":"getVariation"](experiment,user,attributes)},activateExperiment=function(optimizelyClient,experiment,argument_2,argument_3,argument_4,argument_5){var user=2<arguments.length&&void 0!==argument_2?argument_2:util_getOptimizelyUserId();return getVariation(optimizelyClient,experiment,user,3<arguments.length?argument_3:void 0,!0,4<arguments.length&&void 0!==argument_4?argument_4:util_getForcedVariant,!(5<arguments.length&&void 0!==argument_5)||argument_5)},getVariations=function(optClient,experiments,user,argument_3,argument_4,argument_5,argument_6){var attributes=3<arguments.length&&void 0!==argument_3?argument_3:{},activate=4<arguments.length&&void 0!==argument_4&&argument_4,gfv=5<arguments.length&&void 0!==argument_5?argument_5:util_getForcedVariant,sanitize=!(6<arguments.length&&void 0!==argument_6)||argument_6,activeExperiments={};return experiments.forEach(function(experiment){activeExperiments[experiment]=getVariation(optClient,experiment,user,attributes,activate,gfv,sanitize)}),activeExperiments},activateExperiments=function(optClient,experiments,user,argument_3,argument_4,argument_5){return getVariations(optClient,experiments,user,3<arguments.length&&void 0!==argument_3?argument_3:{},!0,4<arguments.length&&void 0!==argument_4?argument_4:util_getForcedVariant,!(5<arguments.length&&void 0!==argument_5)||argument_5)},filterRunningExperiments=function(experiment){return"Running"===experiment.status};__webpack_require__.d(__webpack_exports__,"getOptimizelyUserId",function(){return util_getOptimizelyUserId}),__webpack_require__.d(__webpack_exports__,"getOptExiD",function(){return util_getOptimizelyUserId}),__webpack_require__.d(__webpack_exports__,"getAnoniD",function(){return util_getOptimizelyUserId}),__webpack_require__.d(__webpack_exports__,"getAnonymousiD",function(){return util_getOptimizelyUserId}),__webpack_require__.d(__webpack_exports__,"sanitizeVariant",function(){return sanitizeVariant}),__webpack_require__.d(__webpack_exports__,"sanitizeForcedVariant",function(){return sanitizeForcedVariant}),__webpack_require__.d(__webpack_exports__,"getForcedVariant",function(){return util_getForcedVariant}),__webpack_require__.d(__webpack_exports__,"filterRunningExperiments",function(){return filterRunningExperiments}),__webpack_require__.d(__webpack_exports__,"getExperiments",function(){return getExperiments}),__webpack_require__.d(__webpack_exports__,"getExperimentDriver",function(){return util_getExperimentDriver}),__webpack_require__.d(__webpack_exports__,"mapExperimentKeys",function(){return mapExperimentKeys}),__webpack_require__.d(__webpack_exports__,"activateExperiment",function(){return activateExperiment}),__webpack_require__.d(__webpack_exports__,"activateExperiments",function(){return activateExperiments}),__webpack_require__.d(__webpack_exports__,"getVariation",function(){return getVariation}),__webpack_require__.d(__webpack_exports__,"getVariations",function(){return getVariations}),__webpack_require__.d(__webpack_exports__,"COOKIE_NAME",function(){return"anonymousId"})},function(module,exports,__webpack_require__){var fns=__webpack_require__(4),configValidator=__webpack_require__(75),defaultErrorHandler=__webpack_require__(204),defaultEventDispatcher=__webpack_require__(205),enums=__webpack_require__(1),logger=__webpack_require__(206),Optimizely=__webpack_require__(207);module.exports={createInstance:function(config){try{var logLevel="logLevel"in config?config.logLevel:enums.LOG_LEVEL.INFO,defaultLogger=logger.createLogger({logLevel:enums.LOG_LEVEL.INFO});if(config)try{configValidator.validate(config),config.isValidInstance=!0}catch(ex){var errorMessage="INDEX:"+ex.message;config.logger?config.logger.log(enums.LOG_LEVEL.ERROR,errorMessage):defaultLogger.log(enums.LOG_LEVEL.ERROR,errorMessage),config.isValidInstance=!1}return null==config.skipJSONValidation&&(config.skipJSONValidation=!0),config=fns.assignIn({clientEngine:enums.JAVASCRIPT_CLIENT_ENGINE,clientVersion:enums.CLIENT_VERSION,errorHandler:defaultErrorHandler,eventDispatcher:defaultEventDispatcher,logger:logger.createLogger({logLevel:logLevel})},config),new Optimizely(config)}catch(e){return config.logger.log(enums.LOG_LEVEL.ERROR,e.message),config.errorHandler.handleError(e),null}}}},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(221),parse=__webpack_require__(222),formats=__webpack_require__(78);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var obj,_init=__webpack_require__(85),_init2=(obj=_init)&&obj.__esModule?obj:{default:obj};window.NikeDotcomNavReady(function(dotcomNav){(0,_init2.default)(dotcomNav).then(function(experimentManager){experimentManager.run().catch(function(error){return experimentManager.handleError(error)})})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(dotcomNav){var _dotcomNav$env=dotcomNav.env,env=void 0===_dotcomNav$env?"prod":_dotcomNav$env;return(0,_utils.fetchProfileDataFile)("prod"!==env).then(function(dataFile){var client=(0,_uxTreadOptimizely.getExperimentDriver)(dataFile,{logger:(0,_logger2.default)(env)});if(!client.isValidInstance)throw new _ExperimentException2.default("Optimizely client is not valid");var managerInstance=new _ExperimentManager2.default(client,_experiments2.default,dotcomNav);return Object.defineProperty(dotcomNav,"experimentManager",{value:managerInstance}),managerInstance})};var _uxTreadOptimizely=__webpack_require__(81),_utils=__webpack_require__(223),_ExperimentException2=_interopRequireDefault(__webpack_require__(45)),_ExperimentManager2=_interopRequireDefault(__webpack_require__(227)),_experiments2=_interopRequireDefault(__webpack_require__(230)),_logger2=_interopRequireDefault(__webpack_require__(80));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){var v1=__webpack_require__(87),v4=__webpack_require__(88),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(47),bytesToUuid=__webpack_require__(48),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||_lastMSecs<msecs)&&void 0===options.nsecs&&(nsecs=0),1e4<=nsecs)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+(_lastNSecs=nsecs))%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports,__webpack_require__){var rng=__webpack_require__(47),bytesToUuid=__webpack_require__(48);module.exports=function(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(26),copyObject=__webpack_require__(10),createAssigner=__webpack_require__(53),isArrayLike=__webpack_require__(7),isPrototype=__webpack_require__(14),keys=__webpack_require__(8),hasOwnProperty=Object.prototype.hasOwnProperty,assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])});module.exports=assign},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(50),isMasked=__webpack_require__(94),isObject=__webpack_require__(6),toSource=__webpack_require__(52),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(95),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(2)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var identity=__webpack_require__(18),overRest=__webpack_require__(98),setToString=__webpack_require__(100);module.exports=function(func,start){return setToString(overRest(func,start,identity),func+"")}},function(module,exports,__webpack_require__){var apply=__webpack_require__(99),nativeMax=Math.max;module.exports=function(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},function(module,exports){module.exports=function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(101),setToString=__webpack_require__(103)(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(102),defineProperty=__webpack_require__(49),identity=__webpack_require__(18),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){module.exports=function(value){return function(){return value}}},function(module,exports){var nativeNow=Date.now;module.exports=function(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},function(module,exports,__webpack_require__){var eq=__webpack_require__(17),isArrayLike=__webpack_require__(7),isIndex=__webpack_require__(29),isObject=__webpack_require__(6);module.exports=function(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObjectLike=__webpack_require__(9);module.exports=function(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},function(module,exports){module.exports=function(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isLength=__webpack_require__(28),isObjectLike=__webpack_require__(9),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(56)(Object.keys,Object);module.exports=nativeKeys},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(10),createAssigner=__webpack_require__(53),keysIn=__webpack_require__(35),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});module.exports=assignIn},function(module,exports,__webpack_require__){var isObject=__webpack_require__(6),isPrototype=__webpack_require__(14),nativeKeysIn=__webpack_require__(112),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},function(module,exports){module.exports=function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},function(module,exports,__webpack_require__){var baseClone=__webpack_require__(114);module.exports=function(value){return baseClone(value,5)}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(36),arrayEach=__webpack_require__(57),assignValue=__webpack_require__(26),baseAssign=__webpack_require__(137),baseAssignIn=__webpack_require__(138),cloneBuffer=__webpack_require__(139),copyArray=__webpack_require__(140),copySymbols=__webpack_require__(141),copySymbolsIn=__webpack_require__(142),getAllKeys=__webpack_require__(63),getAllKeysIn=__webpack_require__(143),getTag=__webpack_require__(15),initCloneArray=__webpack_require__(148),initCloneByTag=__webpack_require__(149),initCloneObject=__webpack_require__(154),isArray=__webpack_require__(0),isBuffer=__webpack_require__(19),isMap=__webpack_require__(156),isObject=__webpack_require__(6),isSet=__webpack_require__(158),keys=__webpack_require__(8),CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectTag="[object Object]",cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags[objectTag]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1,module.exports=function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}var stacked=(stack=stack||new Stack).get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}):isMap(value)&&value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))});var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?void 0:keysFunc(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}},function(module,exports){module.exports=function(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(21),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(21);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(21);module.exports=function(key){return-1<assocIndexOf(this.__data__,key)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(21);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(20);module.exports=function(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function(key){return this.__data__.get(key)}},function(module,exports){module.exports=function(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(20),Map=__webpack_require__(37),MapCache=__webpack_require__(38);module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(126),ListCache=__webpack_require__(20),Map=__webpack_require__(37);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(127),hashDelete=__webpack_require__(128),hashGet=__webpack_require__(129),hashHas=__webpack_require__(130),hashSet=__webpack_require__(131);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(22);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(22),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(22),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(22);module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(23);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(23);module.exports=function(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(23);module.exports=function(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(23);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(10),keys=__webpack_require__(8);module.exports=function(object,source){return object&&copyObject(source,keys(source),object)}},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(10),keysIn=__webpack_require__(35);module.exports=function(object,source){return object&&copyObject(source,keysIn(source),object)}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(2),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;module.exports=function(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}}).call(this,__webpack_require__(31)(module))},function(module,exports){module.exports=function(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array}},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(10),getSymbols=__webpack_require__(39);module.exports=function(source,object){return copyObject(source,getSymbols(source),object)}},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(10),getSymbolsIn=__webpack_require__(60);module.exports=function(source,object){return copyObject(source,getSymbolsIn(source),object)}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(64),getSymbolsIn=__webpack_require__(60),keysIn=__webpack_require__(35);module.exports=function(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(5)(__webpack_require__(2),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(5)(__webpack_require__(2),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(5)(__webpack_require__(2),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(5)(__webpack_require__(2),"WeakMap");module.exports=WeakMap},function(module,exports){var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(40),cloneDataView=__webpack_require__(150),cloneRegExp=__webpack_require__(151),cloneSymbol=__webpack_require__(152),cloneTypedArray=__webpack_require__(153);module.exports=function(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case"[object ArrayBuffer]":return cloneArrayBuffer(object);case"[object Boolean]":case"[object Date]":return new Ctor(+object);case"[object DataView]":return cloneDataView(object,isDeep);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cloneTypedArray(object,isDeep);case"[object Map]":return new Ctor;case"[object Number]":case"[object String]":return new Ctor(object);case"[object RegExp]":return cloneRegExp(object);case"[object Set]":return new Ctor;case"[object Symbol]":return cloneSymbol(object)}}},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(40);module.exports=function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}},function(module,exports){var reFlags=/\w*$/;module.exports=function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(40);module.exports=function(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}},function(module,exports,__webpack_require__){var baseCreate=__webpack_require__(155),getPrototype=__webpack_require__(62),isPrototype=__webpack_require__(14);module.exports=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}},function(module,exports,__webpack_require__){function baseCreate(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}var isObject=__webpack_require__(6),objectCreate=Object.create;function object(){}module.exports=baseCreate},function(module,exports,__webpack_require__){var baseIsMap=__webpack_require__(157),baseUnary=__webpack_require__(33),nodeUtil=__webpack_require__(34),nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;module.exports=isMap},function(module,exports,__webpack_require__){var getTag=__webpack_require__(15),isObjectLike=__webpack_require__(9);module.exports=function(value){return isObjectLike(value)&&"[object Map]"==getTag(value)}},function(module,exports,__webpack_require__){var baseIsSet=__webpack_require__(159),baseUnary=__webpack_require__(33),nodeUtil=__webpack_require__(34),nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;module.exports=isSet},function(module,exports,__webpack_require__){var getTag=__webpack_require__(15),isObjectLike=__webpack_require__(9);module.exports=function(value){return isObjectLike(value)&&"[object Set]"==getTag(value)}},function(module,exports,__webpack_require__){var baseKeys=__webpack_require__(55),getTag=__webpack_require__(15),isArguments=__webpack_require__(30),isArray=__webpack_require__(0),isArrayLike=__webpack_require__(7),isBuffer=__webpack_require__(19),isPrototype=__webpack_require__(14),isTypedArray=__webpack_require__(32),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if("[object Map]"==tag||"[object Set]"==tag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(27),keyBy=__webpack_require__(162)(function(result,value,key){baseAssignValue(result,key,value)});module.exports=keyBy},function(module,exports,__webpack_require__){var arrayAggregator=__webpack_require__(163),baseAggregator=__webpack_require__(164),baseIteratee=__webpack_require__(24),isArray=__webpack_require__(0);module.exports=function(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}},function(module,exports){module.exports=function(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(16);module.exports=function(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(166)();module.exports=baseFor},function(module,exports){module.exports=function(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(7);module.exports=function(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}},function(module,exports,__webpack_require__){var baseIsMatch=__webpack_require__(169),getMatchData=__webpack_require__(180),matchesStrictComparable=__webpack_require__(70);module.exports=function(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(36),baseIsEqual=__webpack_require__(67);module.exports=function(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(36),equalArrays=__webpack_require__(68),equalByTag=__webpack_require__(176),equalObjects=__webpack_require__(179),getTag=__webpack_require__(15),isArray=__webpack_require__(0),isBuffer=__webpack_require__(19),isTypedArray=__webpack_require__(32),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsObj=!(objIsArr=!0)}if(isSameTag&&!objIsObj)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return isSameTag&&(stack=stack||new Stack,equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(38),setCacheAdd=__webpack_require__(172),setCacheHas=__webpack_require__(173);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},function(module,exports){module.exports=function(value){return this.__data__.has(value)}},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),Uint8Array=__webpack_require__(65),eq=__webpack_require__(17),equalArrays=__webpack_require__(68),mapToArray=__webpack_require__(177),setToArray=__webpack_require__(178),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert=convert||setToArray,object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}},function(module,exports){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(63),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||"constructor"==key}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var isStrictComparable=__webpack_require__(69),keys=__webpack_require__(8);module.exports=function(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(67),get=__webpack_require__(182),hasIn=__webpack_require__(188),isKey=__webpack_require__(41),isStrictComparable=__webpack_require__(69),matchesStrictComparable=__webpack_require__(70),toKey=__webpack_require__(25);module.exports=function(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(71);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(184),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(185);module.exports=function(func){var result=memoize(func,function(key){return 500===cache.size&&cache.clear(),key}),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(38),FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(187);module.exports=function(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),arrayMap=__webpack_require__(43),isArray=__webpack_require__(0),isSymbol=__webpack_require__(42),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports,__webpack_require__){var baseHasIn=__webpack_require__(189),hasPath=__webpack_require__(190);module.exports=function(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},function(module,exports){module.exports=function(object,key){return null!=object&&key in Object(object)}},function(module,exports,__webpack_require__){var castPath=__webpack_require__(72),isArguments=__webpack_require__(30),isArray=__webpack_require__(0),isIndex=__webpack_require__(29),isLength=__webpack_require__(28),toKey=__webpack_require__(25);module.exports=function(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}},function(module,exports,__webpack_require__){var baseProperty=__webpack_require__(192),basePropertyDeep=__webpack_require__(193),isKey=__webpack_require__(41),toKey=__webpack_require__(25);module.exports=function(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},function(module,exports){module.exports=function(key){return function(object){return null==object?void 0:object[key]}}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(71);module.exports=function(path){return function(object){return baseGet(object,path)}}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(58),baseFilter=__webpack_require__(195),baseIteratee=__webpack_require__(24),isArray=__webpack_require__(0);module.exports=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,baseIteratee(predicate,3))}},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(16);module.exports=function(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}},function(module,exports,__webpack_require__){var arrayEach=__webpack_require__(57),baseEach=__webpack_require__(16),castFunction=__webpack_require__(73),isArray=__webpack_require__(0);module.exports=function(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,castFunction(iteratee))}},function(module,exports,__webpack_require__){var arrayMap=__webpack_require__(43),baseIteratee=__webpack_require__(24),baseMap=__webpack_require__(198),isArray=__webpack_require__(0);module.exports=function(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,baseIteratee(iteratee,3))}},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(16),isArrayLike=__webpack_require__(7);module.exports=function(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}},function(module,exports,__webpack_require__){var arrayReduce=__webpack_require__(200),baseEach=__webpack_require__(16),baseIteratee=__webpack_require__(24),baseReduce=__webpack_require__(201),isArray=__webpack_require__(0);module.exports=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,baseIteratee(iteratee,4),accumulator,initAccum,baseEach)}},function(module,exports){module.exports=function(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},function(module,exports){module.exports=function(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}},function(module,exports,__webpack_require__){var baseValues=__webpack_require__(203),keys=__webpack_require__(8);module.exports=function(object){return null==object?[]:baseValues(object,keys(object))}},function(module,exports,__webpack_require__){var arrayMap=__webpack_require__(43);module.exports=function(object,props){return arrayMap(props,function(key){return object[key]})}},function(module,exports){module.exports={handleError:function(exception){}}},function(module,exports,__webpack_require__){var fns=__webpack_require__(4);module.exports={dispatchEvent:function(eventObj,callback){var req,url=eventObj.url,params=eventObj.params;"POST"===eventObj.httpVerb?((req=new XMLHttpRequest).open("POST",url,!0),req.setRequestHeader("Content-Type","application/json"),req.onreadystatechange=function(){if(4===req.readyState&&callback&&"function"==typeof callback)try{callback(params)}catch(e){}},req.send(JSON.stringify(params))):(url+="?wxhr=true",params&&(url+="&"+toQueryString(params)),(req=new XMLHttpRequest).open("GET",url,!0),req.onreadystatechange=function(){if(4===req.readyState&&callback&&"function"==typeof callback)try{callback()}catch(e){}},req.send())}};var toQueryString=function(obj){return fns.map(obj,function(v,k){return encodeURIComponent(k)+"="+encodeURIComponent(v)}).join("&")}},function(module,exports,__webpack_require__){var fns=__webpack_require__(4),enums=__webpack_require__(1);function NoOpLogger(){}function Logger(config){config=fns.assignIn({logLevel:enums.LOG_LEVEL.ERROR,logToConsole:!0,prefix:"[OPTIMIZELY]"},config),this.setLogLevel(config.logLevel),this.logToConsole=config.logToConsole,this.prefix=config.prefix}NoOpLogger.prototype.log=function(){},Logger.prototype.log=function(logLevel,logMessage){this.__shouldLog(logLevel)&&(this.prefix&&(logMessage=this.prefix+" - "+this.logLevelName+" "+new Date+" "+logMessage),this.logToConsole&&this.__consoleLog(logLevel,[logMessage]))},Logger.prototype.setLogLevel=function(logLevel){this.logLevel=-1<fns.values(enums.LOG_LEVEL).indexOf(logLevel)?logLevel:enums.LOG_LEVEL.ERROR,this.logLevelName=function(logLevel){switch(logLevel){case enums.LOG_LEVEL.DEBUG:return"DEBUG";case enums.LOG_LEVEL.INFO:return"INFO";case enums.LOG_LEVEL.WARNING:return"WARNING";case enums.LOG_LEVEL.ERROR:return"ERROR";default:return"NOTSET"}}(this.logLevel),this.log("Setting log level to "+logLevel)},Logger.prototype.__shouldLog=function(targetLogLevel){return targetLogLevel>=this.logLevel},Logger.prototype.__consoleLog=function(logLevel,logArguments){switch(logLevel){case enums.LOG_LEVEL.DEBUG:case enums.LOG_LEVEL.INFO:console.log.apply(console,logArguments);break;case enums.LOG_LEVEL.WARNING:console.warn.apply(console,logArguments);break;case enums.LOG_LEVEL.ERROR:console.error.apply(console,logArguments);break;default:console.log.apply(console,logArguments)}},module.exports={createLogger:function(config){return new Logger(config)},createNoOpLogger:function(){return new NoOpLogger}}},function(module,exports,__webpack_require__){var fns=__webpack_require__(4),attributesValidator=__webpack_require__(76),decisionService=__webpack_require__(208),enums=__webpack_require__(1),eventBuilder=__webpack_require__(213),eventTagsValidator=__webpack_require__(215),notificationCenter=__webpack_require__(216),projectConfig=__webpack_require__(44),projectConfigSchema=__webpack_require__(217),sprintf=__webpack_require__(3).sprintf,userProfileServiceValidator=__webpack_require__(218),stringValidator=__webpack_require__(219),configValidator=__webpack_require__(75),ERROR_MESSAGES=enums.ERROR_MESSAGES,LOG_LEVEL=enums.LOG_LEVEL,LOG_MESSAGES=enums.LOG_MESSAGES,MODULE_NAME="OPTIMIZELY",DECISION_SOURCES=enums.DECISION_SOURCES,FEATURE_VARIABLE_TYPES=enums.FEATURE_VARIABLE_TYPES;function Optimizely(config){var clientEngine=config.clientEngine;clientEngine!==enums.NODE_CLIENT_ENGINE&&clientEngine!==enums.JAVASCRIPT_CLIENT_ENGINE&&(config.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.INVALID_CLIENT_ENGINE,MODULE_NAME,clientEngine)),clientEngine=enums.NODE_CLIENT_ENGINE),this.clientEngine=clientEngine,this.clientVersion=config.clientVersion||enums.NODE_CLIENT_VERSION,this.errorHandler=config.errorHandler,this.eventDispatcher=config.eventDispatcher,this.isValidInstance=config.isValidInstance,this.logger=config.logger;try{configValidator.validateDatafile(config.datafile),("string"==typeof config.datafile||config.datafile instanceof String)&&(config.datafile=JSON.parse(config.datafile)),!0===config.skipJSONValidation?(this.configObj=projectConfig.createProjectConfig(config.datafile),this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.SKIPPING_JSON_VALIDATION,MODULE_NAME))):config.jsonSchemaValidator.validate(projectConfigSchema,config.datafile)&&(this.configObj=projectConfig.createProjectConfig(config.datafile),this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.VALID_DATAFILE,MODULE_NAME)))}catch(ex){this.isValidInstance=!1,this.logger.log(LOG_LEVEL.ERROR,ex.message),this.errorHandler.handleError(ex)}var userProfileService=null;if(config.userProfileService)try{userProfileServiceValidator.validate(config.userProfileService)&&(userProfileService=config.userProfileService,this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.VALID_USER_PROFILE_SERVICE,MODULE_NAME)))}catch(ex){this.logger.log(LOG_LEVEL.WARNING,ex.message)}this.decisionService=decisionService.createDecisionService({configObj:this.configObj,userProfileService:userProfileService,logger:this.logger}),this.notificationCenter=notificationCenter.createNotificationCenter({logger:this.logger,errorHandler:this.errorHandler})}Optimizely.prototype.activate=function(experimentKey,userId,attributes){try{if(!this.isValidInstance)return this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,"activate")),null;if(!this.__validateInputs({experiment_key:experimentKey,user_id:userId},attributes))return this.__notActivatingExperiment(experimentKey,userId);try{var variationKey=this.getVariation(experimentKey,userId,attributes);if(null===variationKey)return this.__notActivatingExperiment(experimentKey,userId);if(projectConfig.isRunning(this.configObj,experimentKey))return this._sendImpressionEvent(experimentKey,variationKey,userId,attributes),variationKey;var shouldNotDispatchActivateLogMessage=sprintf(LOG_MESSAGES.SHOULD_NOT_DISPATCH_ACTIVATE,MODULE_NAME,experimentKey);return this.logger.log(LOG_LEVEL.DEBUG,shouldNotDispatchActivateLogMessage),variationKey}catch(ex){this.logger.log(LOG_LEVEL.ERROR,ex.message);var failedActivationLogMessage=sprintf(LOG_MESSAGES.NOT_ACTIVATING_USER,MODULE_NAME,userId,experimentKey);return this.logger.log(LOG_LEVEL.INFO,failedActivationLogMessage),this.errorHandler.handleError(ex),null}}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},Optimizely.prototype._sendImpressionEvent=function(experimentKey,variationKey,userId,attributes){var variationId=projectConfig.getVariationIdFromExperimentAndVariationKey(this.configObj,experimentKey,variationKey),experimentId=projectConfig.getExperimentId(this.configObj,experimentKey),impressionEventOptions={attributes:attributes,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:this.configObj,experimentId:experimentId,userId:userId,variationId:variationId,logger:this.logger},impressionEvent=eventBuilder.getImpressionEvent(impressionEventOptions),dispatchedImpressionEventLogMessage=sprintf(LOG_MESSAGES.DISPATCH_IMPRESSION_EVENT,MODULE_NAME,impressionEvent.url,JSON.stringify(impressionEvent.params));this.logger.log(LOG_LEVEL.DEBUG,dispatchedImpressionEventLogMessage);var eventDispatcherCallback=function(){var activatedLogMessage=sprintf(LOG_MESSAGES.ACTIVATE_USER,MODULE_NAME,userId,experimentKey);this.logger.log(LOG_LEVEL.INFO,activatedLogMessage)}.bind(this);this.__dispatchEvent(impressionEvent,eventDispatcherCallback);var variation,experiment=this.configObj.experimentKeyMap[experimentKey];experiment&&experiment.variationKeyMap&&(variation=experiment.variationKeyMap[variationKey]),this.notificationCenter.sendNotifications(enums.NOTIFICATION_TYPES.ACTIVATE,{experiment:experiment,userId:userId,attributes:attributes,variation:variation,logEvent:impressionEvent})},Optimizely.prototype.track=function(eventKey,userId,attributes,eventTags){try{if(!this.isValidInstance)return void this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,"track"));try{if(!this.__validateInputs({user_id:userId,event_key:eventKey},attributes,eventTags))return;var validExperimentsToBucketedVariations=this.__getValidExperimentsForEvent(eventKey,userId,attributes);if(!Object.keys(validExperimentsToBucketedVariations).length)return void this.logger.log(LOG_LEVEL.WARNING,sprintf(LOG_MESSAGES.EVENT_NOT_ASSOCIATED_WITH_EXPERIMENTS,MODULE_NAME,eventKey));eventTags=this.__filterEmptyValues(eventTags);var conversionEventOptions={attributes:attributes,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:this.configObj,eventKey:eventKey,eventTags:eventTags,experimentsToVariationMap:validExperimentsToBucketedVariations,logger:this.logger,userId:userId},conversionEvent=eventBuilder.getConversionEvent(conversionEventOptions),dispatchedConversionEventLogMessage=sprintf(LOG_MESSAGES.DISPATCH_CONVERSION_EVENT,MODULE_NAME,conversionEvent.url,JSON.stringify(conversionEvent.params));this.logger.log(LOG_LEVEL.DEBUG,dispatchedConversionEventLogMessage);var eventDispatcherCallback=function(){var trackedLogMessage=sprintf(LOG_MESSAGES.TRACK_EVENT,MODULE_NAME,eventKey,userId);this.logger.log(LOG_LEVEL.INFO,trackedLogMessage)}.bind(this);this.__dispatchEvent(conversionEvent,eventDispatcherCallback),this.notificationCenter.sendNotifications(enums.NOTIFICATION_TYPES.TRACK,{eventKey:eventKey,userId:userId,attributes:attributes,eventTags:eventTags,logEvent:conversionEvent})}catch(ex){this.logger.log(LOG_LEVEL.ERROR,ex.message);var failedTrackLogMessage=sprintf(LOG_MESSAGES.NOT_TRACKING_USER,MODULE_NAME,userId);this.logger.log(LOG_LEVEL.INFO,failedTrackLogMessage),this.errorHandler.handleError(ex)}}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),void this.errorHandler.handleError(e)}},Optimizely.prototype.getVariation=function(experimentKey,userId,attributes){try{if(!this.isValidInstance)return this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,"getVariation")),null;try{if(!this.__validateInputs({experiment_key:experimentKey,user_id:userId},attributes))return null;var experiment=this.configObj.experimentKeyMap[experimentKey];return fns.isEmpty(experiment)?(this.logger.log(LOG_LEVEL.DEBUG,sprintf(ERROR_MESSAGES.INVALID_EXPERIMENT_KEY,MODULE_NAME,experimentKey)),null):this.decisionService.getVariation(experimentKey,userId,attributes)}catch(ex){return this.logger.log(LOG_LEVEL.ERROR,ex.message),this.errorHandler.handleError(ex),null}}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},Optimizely.prototype.setForcedVariation=function(experimentKey,userId,variationKey){try{return projectConfig.setForcedVariation(this.configObj,experimentKey,userId,variationKey,this.logger)}catch(ex){return this.logger.log(LOG_LEVEL.ERROR,ex.message),this.errorHandler.handleError(ex),!1}},Optimizely.prototype.getForcedVariation=function(experimentKey,userId){try{return projectConfig.getForcedVariation(this.configObj,experimentKey,userId,this.logger)}catch(ex){return this.logger.log(LOG_LEVEL.ERROR,ex.message),this.errorHandler.handleError(ex),null}},Optimizely.prototype.__validateInputs=function(stringInputs,userAttributes,eventTags){try{for(var inputKeys=Object.keys(stringInputs),index=0;index<inputKeys.length;index++){var key=inputKeys[index];if(!stringValidator.validate(stringInputs[key]))throw new Error(sprintf(ERROR_MESSAGES.INVALID_INPUT_FORMAT,MODULE_NAME,key))}return userAttributes&&attributesValidator.validate(userAttributes),eventTags&&eventTagsValidator.validate(eventTags),!0}catch(ex){return this.logger.log(LOG_LEVEL.ERROR,ex.message),this.errorHandler.handleError(ex),!1}},Optimizely.prototype.__getValidExperimentsForEvent=function(eventKey,userId,attributes){var validExperimentsToVariationsMap={},experimentIdsForEvent=projectConfig.getExperimentIdsForEvent(this.configObj,eventKey);return experimentIdsForEvent?validExperimentsToVariationsMap=fns.reduce(experimentIdsForEvent,function(results,experimentId){var experimentKey=this.configObj.experimentIdMap[experimentId].key,variationKey=this.getVariation(experimentKey,userId,attributes);if(variationKey)if(projectConfig.isRunning(this.configObj,experimentKey)){var variationId=projectConfig.getVariationIdFromExperimentAndVariationKey(this.configObj,experimentKey,variationKey);results[experimentId]=variationId}else{var shouldNotDispatchTrackLogMessage=sprintf(LOG_MESSAGES.SHOULD_NOT_DISPATCH_TRACK,MODULE_NAME,experimentKey);this.logger.log(LOG_LEVEL.DEBUG,shouldNotDispatchTrackLogMessage)}else{var notTrackingUserForExperimentLogMessage=sprintf(LOG_MESSAGES.NOT_TRACKING_USER_FOR_EXPERIMENT,MODULE_NAME,userId,experimentKey);this.logger.log(LOG_LEVEL.DEBUG,notTrackingUserForExperimentLogMessage)}return results}.bind(this),{}):validExperimentsToVariationsMap},Optimizely.prototype.__notActivatingExperiment=function(experimentKey,userId){var failedActivationLogMessage=sprintf(LOG_MESSAGES.NOT_ACTIVATING_USER,MODULE_NAME,userId,experimentKey);return this.logger.log(LOG_LEVEL.INFO,failedActivationLogMessage),null},Optimizely.prototype.__dispatchEvent=function(eventToDispatch,callback){var eventDispatcherResponse=this.eventDispatcher.dispatchEvent(eventToDispatch,callback);fns.isEmpty(eventDispatcherResponse)||"function"!=typeof eventDispatcherResponse.then||eventDispatcherResponse.then(function(){callback()})},Optimizely.prototype.__filterEmptyValues=function(map){for(var key in map)!map.hasOwnProperty(key)||null!==map[key]&&void 0!==map[key]||delete map[key];return map},Optimizely.prototype.isFeatureEnabled=function(featureKey,userId,attributes){try{if(!this.isValidInstance)return this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,"isFeatureEnabled")),!1;if(!this.__validateInputs({feature_key:featureKey,user_id:userId},attributes))return!1;var feature=projectConfig.getFeatureFromKey(this.configObj,featureKey,this.logger);if(!feature)return!1;var decision=this.decisionService.getVariationForFeature(feature,userId,attributes),variation=decision.variation;return variation&&(decision.decisionSource===DECISION_SOURCES.EXPERIMENT&&this._sendImpressionEvent(decision.experiment.key,decision.variation.key,userId,attributes),!0===variation.featureEnabled)?(this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.FEATURE_ENABLED_FOR_USER,MODULE_NAME,featureKey,userId)),!0):(this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.FEATURE_NOT_ENABLED_FOR_USER,MODULE_NAME,featureKey,userId)),!1)}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),!1}},Optimizely.prototype.getEnabledFeatures=function(userId,attributes){try{var enabledFeatures=[];return this.isValidInstance?fns.forOwn(this.configObj.featureKeyMap,function(feature){this.isFeatureEnabled(feature.key,userId,attributes)&&enabledFeatures.push(feature.key)}.bind(this)):this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,"getEnabledFeatures")),enabledFeatures}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),[]}},Optimizely.prototype._getFeatureVariableForType=function(featureKey,variableKey,variableType,userId,attributes){if(!this.isValidInstance){var apiName="getFeatureVariable"+variableType.charAt(0).toUpperCase()+variableType.slice(1);return this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.INVALID_OBJECT,MODULE_NAME,apiName)),null}if(!this.__validateInputs({feature_key:featureKey,variable_key:variableKey,user_id:userId},attributes))return null;var featureFlag=projectConfig.getFeatureFromKey(this.configObj,featureKey,this.logger);if(!featureFlag)return null;var variable=projectConfig.getVariableForFeature(this.configObj,featureKey,variableKey,this.logger);if(!variable)return null;if(variable.type!==variableType)return this.logger.log(LOG_LEVEL.WARNING,sprintf(LOG_MESSAGES.VARIABLE_REQUESTED_WITH_WRONG_TYPE,MODULE_NAME,variableType,variable.type)),null;var variableValue,decision=this.decisionService.getVariationForFeature(featureFlag,userId,attributes);return null!==decision.variation?(variableValue=projectConfig.getVariableValueForVariation(this.configObj,variable,decision.variation,this.logger),this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.USER_RECEIVED_VARIABLE_VALUE,MODULE_NAME,variableKey,featureFlag.key,variableValue,userId))):(variableValue=variable.defaultValue,this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,MODULE_NAME,userId,variableKey,featureFlag.key))),projectConfig.getTypeCastValue(variableValue,variableType,this.logger)},Optimizely.prototype.getFeatureVariableBoolean=function(featureKey,variableKey,userId,attributes){try{return this._getFeatureVariableForType(featureKey,variableKey,FEATURE_VARIABLE_TYPES.BOOLEAN,userId,attributes)}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},Optimizely.prototype.getFeatureVariableDouble=function(featureKey,variableKey,userId,attributes){try{return this._getFeatureVariableForType(featureKey,variableKey,FEATURE_VARIABLE_TYPES.DOUBLE,userId,attributes)}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},Optimizely.prototype.getFeatureVariableInteger=function(featureKey,variableKey,userId,attributes){try{return this._getFeatureVariableForType(featureKey,variableKey,FEATURE_VARIABLE_TYPES.INTEGER,userId,attributes)}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},Optimizely.prototype.getFeatureVariableString=function(featureKey,variableKey,userId,attributes){try{return this._getFeatureVariableForType(featureKey,variableKey,FEATURE_VARIABLE_TYPES.STRING,userId,attributes)}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),null}},module.exports=Optimizely},function(module,exports,__webpack_require__){var audienceEvaluator=__webpack_require__(209),bucketer=__webpack_require__(211),enums=__webpack_require__(1),fns=__webpack_require__(4),projectConfig=__webpack_require__(44),sprintf=__webpack_require__(3).sprintf,MODULE_NAME="DECISION_SERVICE",ERROR_MESSAGES=enums.ERROR_MESSAGES,LOG_LEVEL=enums.LOG_LEVEL,LOG_MESSAGES=enums.LOG_MESSAGES,DECISION_SOURCES=enums.DECISION_SOURCES;function DecisionService(options){this.configObj=options.configObj,this.userProfileService=options.userProfileService||null,this.logger=options.logger}DecisionService.prototype.getVariation=function(experimentKey,userId,attributes){var bucketingId=this._getBucketingId(userId,attributes);if(!this.__checkIfExperimentIsActive(experimentKey,userId))return null;var experiment=this.configObj.experimentKeyMap[experimentKey],forcedVariationKey=projectConfig.getForcedVariation(this.configObj,experimentKey,userId,this.logger);if(forcedVariationKey)return forcedVariationKey;var variation=this.__getWhitelistedVariation(experiment,userId);if(variation)return variation.key;var experimentBucketMap=this.__resolveExperimentBucketMap(userId,attributes);if(variation=this.__getStoredVariation(experiment,userId,experimentBucketMap))return this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.RETURNING_STORED_VARIATION,MODULE_NAME,variation.key,experimentKey,userId)),variation.key;if(!this.__checkIfUserIsInAudience(experimentKey,userId,attributes))return null;var bucketerParams=this.__buildBucketerParams(experimentKey,bucketingId,userId),variationId=bucketer.bucket(bucketerParams);return(variation=this.configObj.variationIdMap[variationId])?(this.__saveUserProfile(experiment,variation,userId,experimentBucketMap),variation.key):null},DecisionService.prototype.__resolveExperimentBucketMap=function(userId,attributes){attributes=attributes||{};var userProfile=this.__getUserProfile(userId)||{},attributeExperimentBucketMap=attributes[enums.CONTROL_ATTRIBUTES.STICKY_BUCKETING_KEY];return fns.assignIn({},userProfile.experiment_bucket_map,attributeExperimentBucketMap)},DecisionService.prototype.__checkIfExperimentIsActive=function(experimentKey,userId){if(projectConfig.isActive(this.configObj,experimentKey))return!0;var experimentNotRunningLogMessage=sprintf(LOG_MESSAGES.EXPERIMENT_NOT_RUNNING,MODULE_NAME,experimentKey);return this.logger.log(LOG_LEVEL.INFO,experimentNotRunningLogMessage),!1},DecisionService.prototype.__getWhitelistedVariation=function(experiment,userId){if(fns.isEmpty(experiment.forcedVariations)||!experiment.forcedVariations.hasOwnProperty(userId))return null;var forcedVariationKey=experiment.forcedVariations[userId];if(experiment.variationKeyMap.hasOwnProperty(forcedVariationKey)){var forcedBucketingSucceededMessageLog=sprintf(LOG_MESSAGES.USER_FORCED_IN_VARIATION,MODULE_NAME,userId,forcedVariationKey);return this.logger.log(LOG_LEVEL.INFO,forcedBucketingSucceededMessageLog),experiment.variationKeyMap[forcedVariationKey]}var forcedBucketingFailedMessageLog=sprintf(LOG_MESSAGES.FORCED_BUCKETING_FAILED,MODULE_NAME,forcedVariationKey,userId);return this.logger.log(LOG_LEVEL.ERROR,forcedBucketingFailedMessageLog),null},DecisionService.prototype.__checkIfUserIsInAudience=function(experimentKey,userId,attributes){var audiences=projectConfig.getAudiencesForExperiment(this.configObj,experimentKey);if(audienceEvaluator.evaluate(audiences,attributes))return!0;var userDoesNotMeetConditionsLogMessage=sprintf(LOG_MESSAGES.USER_NOT_IN_EXPERIMENT,MODULE_NAME,userId,experimentKey);return this.logger.log(LOG_LEVEL.INFO,userDoesNotMeetConditionsLogMessage),!1},DecisionService.prototype.__buildBucketerParams=function(experimentKey,bucketingId,userId){var bucketerParams={};return bucketerParams.experimentKey=experimentKey,bucketerParams.experimentId=projectConfig.getExperimentId(this.configObj,experimentKey),bucketerParams.userId=userId,bucketerParams.trafficAllocationConfig=projectConfig.getTrafficAllocation(this.configObj,experimentKey),bucketerParams.experimentKeyMap=this.configObj.experimentKeyMap,bucketerParams.groupIdMap=this.configObj.groupIdMap,bucketerParams.variationIdMap=this.configObj.variationIdMap,bucketerParams.logger=this.logger,bucketerParams.bucketingId=bucketingId,bucketerParams},DecisionService.prototype.__getStoredVariation=function(experiment,userId,experimentBucketMap){if(experimentBucketMap.hasOwnProperty(experiment.id)){var decision=experimentBucketMap[experiment.id],variationId=decision.variation_id;if(this.configObj.variationIdMap.hasOwnProperty(variationId))return this.configObj.variationIdMap[decision.variation_id];this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.SAVED_VARIATION_NOT_FOUND,MODULE_NAME,userId,variationId,experiment.key))}return null},DecisionService.prototype.__getUserProfile=function(userId){var userProfile={user_id:userId,experiment_bucket_map:{}};if(!this.userProfileService)return userProfile;try{return this.userProfileService.lookup(userId)}catch(ex){this.logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.USER_PROFILE_LOOKUP_ERROR,MODULE_NAME,userId,ex.message))}},DecisionService.prototype.__saveUserProfile=function(experiment,variation,userId,experimentBucketMap){if(this.userProfileService)try{var newBucketMap=fns.cloneDeep(experimentBucketMap);newBucketMap[experiment.id]={variation_id:variation.id},this.userProfileService.save({user_id:userId,experiment_bucket_map:newBucketMap}),this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.SAVED_VARIATION,MODULE_NAME,variation.key,experiment.key,userId))}catch(ex){this.logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.USER_PROFILE_SAVE_ERROR,MODULE_NAME,userId,ex.message))}},DecisionService.prototype.getVariationForFeature=function(feature,userId,attributes){var experimentDecision=this._getVariationForFeatureExperiment(feature,userId,attributes);if(null!==experimentDecision.variation)return this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_IN_FEATURE_EXPERIMENT,MODULE_NAME,userId,experimentDecision.variation.key,experimentDecision.experiment.key,feature.key)),experimentDecision;this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_NOT_IN_FEATURE_EXPERIMENT,MODULE_NAME,userId,feature.key));var rolloutDecision=this._getVariationForRollout(feature,userId,attributes);return null!==rolloutDecision.variation?(this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_IN_ROLLOUT,MODULE_NAME,userId,feature.key)),rolloutDecision):(this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_NOT_IN_ROLLOUT,MODULE_NAME,userId,feature.key)),{experiment:null,variation:null,decisionSource:null})},DecisionService.prototype._getVariationForFeatureExperiment=function(feature,userId,attributes){var experiment=null,variationKey=null;if(feature.hasOwnProperty("groupId")){var group=this.configObj.groupIdMap[feature.groupId];group&&(experiment=this._getExperimentInGroup(group,userId))&&(variationKey=this.getVariation(experiment.key,userId,attributes))}else 0<feature.experimentIds.length?(experiment=projectConfig.getExperimentFromId(this.configObj,feature.experimentIds[0],this.logger))&&(variationKey=this.getVariation(experiment.key,userId,attributes)):this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.FEATURE_HAS_NO_EXPERIMENTS,MODULE_NAME,feature.key));var variation=null;return null!==variationKey&&null!==experiment&&(variation=experiment.variationKeyMap[variationKey]),{experiment:experiment,variation:variation,decisionSource:DECISION_SOURCES.EXPERIMENT}},DecisionService.prototype._getExperimentInGroup=function(group,userId){var experimentId=bucketer.bucketUserIntoExperiment(group,userId,userId,this.logger);if(null!==experimentId){this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,MODULE_NAME,userId,experimentId,group.id));var experiment=projectConfig.getExperimentFromId(this.configObj,experimentId,this.logger);if(experiment)return experiment}return this.logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP,MODULE_NAME,userId,group.id)),null},DecisionService.prototype._getVariationForRollout=function(feature,userId,attributes){if(!feature.rolloutId)return this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.NO_ROLLOUT_EXISTS,MODULE_NAME,feature.key)),{experiment:null,variation:null,decisionSource:DECISION_SOURCES.ROLLOUT};var rollout=this.configObj.rolloutIdMap[feature.rolloutId];if(!rollout)return this.logger.log(LOG_LEVEL.ERROR,sprintf(ERROR_MESSAGES.INVALID_ROLLOUT_ID,MODULE_NAME,feature.rolloutId,feature.key)),{experiment:null,variation:null,decisionSource:DECISION_SOURCES.ROLLOUT};if(0===rollout.experiments.length)return this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.ROLLOUT_HAS_NO_EXPERIMENTS,MODULE_NAME,feature.rolloutId)),{experiment:null,variation:null,decisionSource:DECISION_SOURCES.ROLLOUT};var index,experiment,bucketerParams,variationId,variation,endIndex=rollout.experiments.length-1;for(index=0;index<endIndex;index++){if(experiment=this.configObj.experimentKeyMap[rollout.experiments[index].key],this.__checkIfUserIsInAudience(experiment.key,userId,attributes)){if(this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,MODULE_NAME,userId,index+1)),bucketerParams=this.__buildBucketerParams(experiment.key,userId,userId),variationId=bucketer.bucket(bucketerParams),variation=this.configObj.variationIdMap[variationId])return this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_BUCKETED_INTO_TARGETING_RULE,MODULE_NAME,userId,index+1)),{experiment:experiment,variation:variation,decisionSource:DECISION_SOURCES.ROLLOUT};this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_NOT_BUCKETED_INTO_TARGETING_RULE,MODULE_NAME,userId,index+1));break}this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,MODULE_NAME,userId,index+1))}var everyoneElseExperiment=this.configObj.experimentKeyMap[rollout.experiments[endIndex].key];if(this.__checkIfUserIsInAudience(everyoneElseExperiment.key,userId,attributes)){if(bucketerParams=this.__buildBucketerParams(everyoneElseExperiment.key,userId,userId),variationId=bucketer.bucket(bucketerParams),variation=this.configObj.variationIdMap[variationId])return this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE,MODULE_NAME,userId)),{experiment:everyoneElseExperiment,variation:variation,decisionSource:DECISION_SOURCES.ROLLOUT};this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE,MODULE_NAME,userId))}return{experiment:null,variation:null,decisionSource:DECISION_SOURCES.ROLLOUT}},DecisionService.prototype._getBucketingId=function(userId,attributes){var bucketingId=userId;return null!=attributes&&"object"==typeof attributes&&attributes.hasOwnProperty(enums.CONTROL_ATTRIBUTES.BUCKETING_ID)&&("string"==typeof attributes[enums.CONTROL_ATTRIBUTES.BUCKETING_ID]?(bucketingId=attributes[enums.CONTROL_ATTRIBUTES.BUCKETING_ID],this.logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.VALID_BUCKETING_ID,MODULE_NAME,bucketingId))):this.logger.log(LOG_LEVEL.WARNING,sprintf(LOG_MESSAGES.BUCKETING_ID_NOT_STRING,MODULE_NAME))),bucketingId},module.exports={createDecisionService:function(options){return new DecisionService(options)}}},function(module,exports,__webpack_require__){var conditionEvaluator=__webpack_require__(210);module.exports={evaluate:function(audiences,userAttributes){if(!audiences||0===audiences.length)return!0;if(!userAttributes)return!1;for(var i=0;i<audiences.length;i++){var conditions=audiences[i].conditions;if(conditionEvaluator.evaluate(conditions,userAttributes))return!0}return!1}}},function(module,exports){var AND_CONDITION="and",OR_CONDITION="or",NOT_CONDITION="not",DEFAULT_OPERATOR_TYPES=[AND_CONDITION,OR_CONDITION,NOT_CONDITION];function evaluate(conditions,userAttributes){if(Array.isArray(conditions)){var firstOperator=conditions[0];if(-1===DEFAULT_OPERATOR_TYPES.indexOf(firstOperator))return!1;var restOfConditions=conditions.slice(1);switch(firstOperator){case AND_CONDITION:return function(conditions,userAttributes){for(var i=0;i<conditions.length;i++)if(!evaluate(conditions[i],userAttributes))return!1;return!0}(restOfConditions,userAttributes);case NOT_CONDITION:return function(conditions,userAttributes){return 1===conditions.length&&!evaluate(conditions[0],userAttributes)}(restOfConditions,userAttributes);case OR_CONDITION:return function(conditions,userAttributes){for(var i=0;i<conditions.length;i++){if(evaluate(conditions[i],userAttributes))return!0}return!1}(restOfConditions,userAttributes)}}return function(conditions,userAttributes){if(userAttributes.hasOwnProperty(conditions[0]))return userAttributes[conditions[0]]===conditions[1];return!1}([conditions.name,conditions.value],userAttributes)}module.exports={evaluate:evaluate}},function(module,exports,__webpack_require__){var enums=__webpack_require__(1),murmurhash=__webpack_require__(212),sprintf=__webpack_require__(3).sprintf,ERROR_MESSAGES=enums.ERROR_MESSAGES,LOG_LEVEL=enums.LOG_LEVEL,LOG_MESSAGES=enums.LOG_MESSAGES,MAX_HASH_VALUE=Math.pow(2,32);module.exports={bucket:function(bucketerParams){var groupId=bucketerParams.experimentKeyMap[bucketerParams.experimentKey].groupId;if(groupId){var group=bucketerParams.groupIdMap[groupId];if(!group)throw new Error(sprintf(ERROR_MESSAGES.INVALID_GROUP_ID,"BUCKETER",groupId));if("random"===group.policy){var bucketedExperimentId=module.exports.bucketUserIntoExperiment(group,bucketerParams.bucketingId,bucketerParams.userId,bucketerParams.logger);if(null===bucketedExperimentId){var notbucketedInAnyExperimentLogMessage=sprintf(LOG_MESSAGES.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",bucketerParams.userId,groupId);return bucketerParams.logger.log(LOG_LEVEL.INFO,notbucketedInAnyExperimentLogMessage),null}if(bucketedExperimentId!==bucketerParams.experimentId){var notBucketedIntoExperimentOfGroupLogMessage=sprintf(LOG_MESSAGES.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",bucketerParams.userId,bucketerParams.experimentKey,groupId);return bucketerParams.logger.log(LOG_LEVEL.INFO,notBucketedIntoExperimentOfGroupLogMessage),null}var bucketedIntoExperimentOfGroupLogMessage=sprintf(LOG_MESSAGES.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",bucketerParams.userId,bucketerParams.experimentKey,groupId);bucketerParams.logger.log(LOG_LEVEL.INFO,bucketedIntoExperimentOfGroupLogMessage)}}var bucketingId=sprintf("%s%s",bucketerParams.bucketingId,bucketerParams.experimentId),bucketValue=module.exports._generateBucketValue(bucketingId),bucketedUserLogMessage=sprintf(LOG_MESSAGES.USER_ASSIGNED_TO_VARIATION_BUCKET,"BUCKETER",bucketValue,bucketerParams.userId);bucketerParams.logger.log(LOG_LEVEL.DEBUG,bucketedUserLogMessage);var entityId=module.exports._findBucket(bucketValue,bucketerParams.trafficAllocationConfig);if(null===entityId){var userHasNoVariationLogMessage=sprintf(LOG_MESSAGES.USER_HAS_NO_VARIATION,"BUCKETER",bucketerParams.userId,bucketerParams.experimentKey);bucketerParams.logger.log(LOG_LEVEL.DEBUG,userHasNoVariationLogMessage)}else{if(""===entityId||!bucketerParams.variationIdMap.hasOwnProperty(entityId)){var invalidVariationIdLogMessage=sprintf(LOG_MESSAGES.INVALID_VARIATION_ID,"BUCKETER");return bucketerParams.logger.log(LOG_LEVEL.WARNING,invalidVariationIdLogMessage),null}var variationKey=bucketerParams.variationIdMap[entityId].key,userInVariationLogMessage=sprintf(LOG_MESSAGES.USER_HAS_VARIATION,"BUCKETER",bucketerParams.userId,variationKey,bucketerParams.experimentKey);bucketerParams.logger.log(LOG_LEVEL.INFO,userInVariationLogMessage)}return entityId},bucketUserIntoExperiment:function(group,bucketingId,userId,logger){var bucketingKey=sprintf("%s%s",bucketingId,group.id),bucketValue=module.exports._generateBucketValue(bucketingKey);logger.log(LOG_LEVEL.DEBUG,sprintf(LOG_MESSAGES.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",bucketValue,userId));var trafficAllocationConfig=group.trafficAllocation;return module.exports._findBucket(bucketValue,trafficAllocationConfig)},_findBucket:function(bucketValue,trafficAllocationConfig){for(var i=0;i<trafficAllocationConfig.length;i++)if(bucketValue<trafficAllocationConfig[i].endOfRange)return trafficAllocationConfig[i].entityId;return null},_generateBucketValue:function(bucketingKey){try{var hashValue=murmurhash.v3(bucketingKey,1);return parseInt(1e4*(hashValue/MAX_HASH_VALUE),10)}catch(ex){throw new Error(sprintf(ERROR_MESSAGES.INVALID_BUCKETING_ID,"BUCKETER",bucketingKey,ex.message))}}}},function(module,exports,__webpack_require__){function MurmurHashV3(key,seed){var remainder,bytes,h1,h1b,c1,c2,k1,i;for(remainder=3&key.length,bytes=key.length-remainder,h1=seed,c1=3432918353,c2=461845907,i=0;i<bytes;)k1=255&key.charCodeAt(i)|(255&key.charCodeAt(++i))<<8|(255&key.charCodeAt(++i))<<16|(255&key.charCodeAt(++i))<<24,++i,h1=27492+(65535&(h1b=5*(65535&(h1=(h1^=k1=(65535&(k1=(k1=(65535&k1)*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295)<<13|h1>>>19))+((5*(h1>>>16)&65535)<<16)&4294967295))+((58964+(h1b>>>16)&65535)<<16);switch(k1=0,remainder){case 3:k1^=(255&key.charCodeAt(i+2))<<16;case 2:k1^=(255&key.charCodeAt(i+1))<<8;case 1:h1^=k1=(65535&(k1=(k1=(65535&(k1^=255&key.charCodeAt(i)))*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295}return h1^=key.length,h1=2246822507*(65535&(h1^=h1>>>16))+((2246822507*(h1>>>16)&65535)<<16)&4294967295,h1=3266489909*(65535&(h1^=h1>>>13))+((3266489909*(h1>>>16)&65535)<<16)&4294967295,(h1^=h1>>>16)>>>0}var murmur;(murmur=MurmurHashV3).v2=function(str,seed){for(var k,l=str.length,h=seed^l,i=0;4<=l;)k=1540483477*(65535&(k=255&str.charCodeAt(i)|(255&str.charCodeAt(++i))<<8|(255&str.charCodeAt(++i))<<16|(255&str.charCodeAt(++i))<<24))+((1540483477*(k>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(k=1540483477*(65535&(k^=k>>>24))+((1540483477*(k>>>16)&65535)<<16)),l-=4,++i;switch(l){case 3:h^=(255&str.charCodeAt(i+2))<<16;case 2:h^=(255&str.charCodeAt(i+1))<<8;case 1:h=1540483477*(65535&(h^=255&str.charCodeAt(i)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0},murmur.v3=MurmurHashV3,module.exports=murmur},function(module,exports,__webpack_require__){var enums=__webpack_require__(1),fns=__webpack_require__(4),eventTagUtils=__webpack_require__(214),projectConfig=__webpack_require__(44),attributeValidator=__webpack_require__(76),ENDPOINT="https://logx.optimizely.com/v1/events";function getCommonEventParams(options){var attributes=options.attributes,configObj=options.configObj,anonymize_ip=configObj.anonymizeIP,botFiltering=configObj.botFiltering;null==anonymize_ip&&(anonymize_ip=!1);var visitor={snapshots:[],visitor_id:options.userId,attributes:[]},commonParams={account_id:configObj.accountId,project_id:configObj.projectId,visitors:[visitor],revision:configObj.revision,client_name:options.clientEngine,client_version:options.clientVersion,anonymize_ip:anonymize_ip};return fns.forOwn(attributes,function(attributeValue,attributeKey){if(attributeValidator.isAttributeValid(attributeKey,attributeValue)){var attributeId=projectConfig.getAttributeId(options.configObj,attributeKey,options.logger);attributeId&&commonParams.visitors[0].attributes.push({entity_id:attributeId,key:attributeKey,type:"custom",value:attributes[attributeKey]})}}),"boolean"==typeof botFiltering&&commonParams.visitors[0].attributes.push({entity_id:enums.CONTROL_ATTRIBUTES.BOT_FILTERING,key:enums.CONTROL_ATTRIBUTES.BOT_FILTERING,type:"custom",value:botFiltering}),commonParams}module.exports={getImpressionEvent:function(options){var impressionEvent={httpVerb:"POST"},commonParams=getCommonEventParams(options);impressionEvent.url=ENDPOINT;var impressionEventParams=function(configObj,experimentId,variationId){return{decisions:[{campaign_id:projectConfig.getLayerId(configObj,experimentId),experiment_id:experimentId,variation_id:variationId}],events:[{entity_id:projectConfig.getLayerId(configObj,experimentId),timestamp:fns.currentTimestamp(),key:"campaign_activated",uuid:fns.uuid()}]}}(options.configObj,options.experimentId,options.variationId);return commonParams.visitors[0].snapshots.push(impressionEventParams),impressionEvent.params=commonParams,impressionEvent},getConversionEvent:function(options){var conversionEvent={httpVerb:"POST"},commonParams=getCommonEventParams(options);conversionEvent.url=ENDPOINT;var snapshot=function(configObj,eventKey,eventTags,experimentsToVariationMap,logger){var snapshot={decisions:[],events:[]};fns.forOwn(experimentsToVariationMap,function(variationId,experimentId){var decision={campaign_id:projectConfig.getLayerId(configObj,experimentId),experiment_id:experimentId,variation_id:variationId};snapshot.decisions.push(decision)});var eventDict={entity_id:projectConfig.getEventId(configObj,eventKey),timestamp:fns.currentTimestamp(),uuid:fns.uuid(),key:eventKey};if(eventTags){var revenue=eventTagUtils.getRevenueValue(eventTags,logger);revenue&&(eventDict[enums.RESERVED_EVENT_KEYWORDS.REVENUE]=revenue);var eventValue=eventTagUtils.getEventValue(eventTags,logger);eventValue&&(eventDict[enums.RESERVED_EVENT_KEYWORDS.VALUE]=eventValue),eventDict.tags=eventTags}return snapshot.events.push(eventDict),snapshot}(options.configObj,options.eventKey,options.eventTags,options.experimentsToVariationMap,options.logger);return commonParams.visitors[0].snapshots=[snapshot],conversionEvent.params=commonParams,conversionEvent}}},function(module,exports,__webpack_require__){var enums=__webpack_require__(1),sprintf=__webpack_require__(3).sprintf,LOG_LEVEL=enums.LOG_LEVEL,LOG_MESSAGES=enums.LOG_MESSAGES,REVENUE_EVENT_METRIC_NAME=enums.RESERVED_EVENT_KEYWORDS.REVENUE,VALUE_EVENT_METRIC_NAME=enums.RESERVED_EVENT_KEYWORDS.VALUE;module.exports={getRevenueValue:function(eventTags,logger){if(eventTags&&eventTags.hasOwnProperty(REVENUE_EVENT_METRIC_NAME)){var rawValue=eventTags[REVENUE_EVENT_METRIC_NAME],parsedRevenueValue=parseInt(rawValue,10);return isNaN(parsedRevenueValue)?(logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.FAILED_TO_PARSE_REVENUE,"EVENT_TAG_UTILS",rawValue)),null):(logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",parsedRevenueValue)),parsedRevenueValue)}return null},getEventValue:function(eventTags,logger){if(eventTags&&eventTags.hasOwnProperty(VALUE_EVENT_METRIC_NAME)){var rawValue=eventTags[VALUE_EVENT_METRIC_NAME],parsedEventValue=parseFloat(rawValue);return isNaN(parsedEventValue)?(logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.FAILED_TO_PARSE_VALUE,"EVENT_TAG_UTILS",rawValue)),null):(logger.log(LOG_LEVEL.INFO,sprintf(LOG_MESSAGES.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",parsedEventValue)),parsedEventValue)}return null}}},function(module,exports,__webpack_require__){var sprintf=__webpack_require__(3).sprintf,ERROR_MESSAGES=__webpack_require__(1).ERROR_MESSAGES;module.exports={validate:function(eventTags){if("object"!=typeof eventTags||Array.isArray(eventTags)||null===eventTags)throw new Error(sprintf(ERROR_MESSAGES.INVALID_EVENT_TAGS,"EVENT_TAGS_VALIDATOR"));return!0}}},function(module,exports,__webpack_require__){var enums=__webpack_require__(1),fns=__webpack_require__(4),sprintf=__webpack_require__(3).sprintf,LOG_LEVEL=enums.LOG_LEVEL,LOG_MESSAGES=enums.LOG_MESSAGES;function NotificationCenter(options){this.logger=options.logger,this.errorHandler=options.errorHandler,this.__notificationListeners={},fns.forOwn(enums.NOTIFICATION_TYPES,function(notificationTypeEnum){this.__notificationListeners[notificationTypeEnum]=[]}.bind(this)),this.__listenerId=1}NotificationCenter.prototype.addNotificationListener=function(notificationType,callback){try{if(!(-1<fns.values(enums.NOTIFICATION_TYPES).indexOf(notificationType)))return-1;this.__notificationListeners[notificationType]||(this.__notificationListeners[notificationType]=[]);var callbackAlreadyAdded=!1;if(fns.forEach(this.__notificationListeners[notificationType],function(listenerEntry){if(listenerEntry.callback===callback)return!(callbackAlreadyAdded=!0)}),callbackAlreadyAdded)return-1;this.__notificationListeners[notificationType].push({id:this.__listenerId,callback:callback});var returnId=this.__listenerId;return this.__listenerId+=1,returnId}catch(e){return this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e),-1}},NotificationCenter.prototype.removeNotificationListener=function(listenerId){try{var indexToRemove,typeToRemove;if(fns.forOwn(this.__notificationListeners,function(listenersForType,notificationType){if(fns.forEach(listenersForType,function(listenerEntry,i){if(listenerEntry.id===listenerId)return indexToRemove=i,typeToRemove=notificationType,!1}),void 0!==indexToRemove&&void 0!==typeToRemove)return!1}),void 0!==indexToRemove&&void 0!==typeToRemove)return this.__notificationListeners[typeToRemove].splice(indexToRemove,1),!0}catch(e){this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e)}return!1},NotificationCenter.prototype.clearAllNotificationListeners=function(){try{fns.forOwn(enums.NOTIFICATION_TYPES,function(notificationTypeEnum){this.__notificationListeners[notificationTypeEnum]=[]}.bind(this))}catch(e){this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e)}},NotificationCenter.prototype.clearNotificationListeners=function(notificationType){try{this.__notificationListeners[notificationType]=[]}catch(e){this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e)}},NotificationCenter.prototype.sendNotifications=function(notificationType,notificationData){try{fns.forEach(this.__notificationListeners[notificationType],function(listenerEntry){var callback=listenerEntry.callback;try{callback(notificationData)}catch(ex){this.logger.log(LOG_LEVEL.ERROR,sprintf(LOG_MESSAGES.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",notificationType,ex.message))}}.bind(this))}catch(e){this.logger.log(LOG_LEVEL.ERROR,e.message),this.errorHandler.handleError(e)}},module.exports={createNotificationCenter:function(options){return new NotificationCenter(options)}}},function(module,exports){module.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{projectId:{type:"string",required:!0},accountId:{type:"string",required:!0},groups:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},policy:{type:"string",required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0},events:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},experimentIds:{type:"array",items:{type:"string",required:!0}},id:{type:"string",required:!0}}},required:!0},audiences:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},name:{type:"string",required:!0},conditions:{type:"string",required:!0}}},required:!0},attributes:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},version:{type:"string",required:!0},revision:{type:"string",required:!0}}}},function(module,exports,__webpack_require__){var sprintf=__webpack_require__(3).sprintf,ERROR_MESSAGES=__webpack_require__(1).ERROR_MESSAGES;module.exports={validate:function(userProfileServiceInstance){if("function"!=typeof userProfileServiceInstance.lookup)throw new Error(sprintf(ERROR_MESSAGES.INVALID_USER_PROFILE_SERVICE,"USER_PROFILE_SERVICE_VALIDATOR","Missing function 'lookup'"));if("function"!=typeof userProfileServiceInstance.save)throw new Error(sprintf(ERROR_MESSAGES.INVALID_USER_PROFILE_SERVICE,"USER_PROFILE_SERVICE_VALIDATOR","Missing function 'save'"));return!0}}},function(module,exports){module.exports={validate:function(input){return"string"==typeof input&&""!==input}}},function(module,exports,__webpack_require__){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly){var obj=object;if("function"==typeof filter)obj=filter(prefix,obj);else if(obj instanceof Date)obj=serializeDate(obj);else if(null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder))+"="+formatter(encoder(obj,defaults.encoder))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(Array.isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(values=Array.isArray(obj)?values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)):values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}return values}var utils=__webpack_require__(77),formats=__webpack_require__(78),arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}},toISO=Date.prototype.toISOString,defaults={delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,serializeDate:function(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1};module.exports=function(object,opts){var obj=object,options=opts?utils.assign({},opts):{};if(null!==options.encoder&&void 0!==options.encoder&&"function"!=typeof options.encoder)throw new TypeError("Encoder has to be a function.");var delimiter=void 0===options.delimiter?defaults.delimiter:options.delimiter,strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,skipNulls="boolean"==typeof options.skipNulls?options.skipNulls:defaults.skipNulls,encode="boolean"==typeof options.encode?options.encode:defaults.encode,encoder="function"==typeof options.encoder?options.encoder:defaults.encoder,sort="function"==typeof options.sort?options.sort:null,allowDots=void 0!==options.allowDots&&options.allowDots,serializeDate="function"==typeof options.serializeDate?options.serializeDate:defaults.serializeDate,encodeValuesOnly="boolean"==typeof options.encodeValuesOnly?options.encodeValuesOnly:defaults.encodeValuesOnly;if(void 0===options.format)options.format=formats.default;else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format))throw new TypeError("Unknown format option provided.");var objKeys,filter,formatter=formats.formatters[options.format];"function"==typeof options.filter?obj=(filter=options.filter)("",obj):Array.isArray(options.filter)&&(objKeys=filter=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=options.arrayFormat in arrayPrefixGenerators?options.arrayFormat:"indices"in options?options.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys=objKeys||Object.keys(obj),sort&&objKeys.sort(sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}var joined=keys.join(delimiter),prefix=!0===options.addQueryPrefix?"?":"";return 0<joined.length?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";function parseKeys(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;0<=i;--i){var obj,root=chain[i];if("[]"===root)obj=(obj=[]).concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&0<=index&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf}leaf=obj}return leaf}(keys,val,options)}}var utils=__webpack_require__(77),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:utils.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(null!==options.decoder&&void 0!==options.decoder&&"function"!=typeof options.decoder)throw new TypeError("Decoder has to be a function.");if(options.ignoreQueryPrefix=!0===options.ignoreQueryPrefix,options.delimiter="string"==typeof options.delimiter||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter,options.depth="number"==typeof options.depth?options.depth:defaults.depth,options.arrayLimit="number"==typeof options.arrayLimit?options.arrayLimit:defaults.arrayLimit,options.parseArrays=!1!==options.parseArrays,options.decoder="function"==typeof options.decoder?options.decoder:defaults.decoder,options.allowDots="boolean"==typeof options.allowDots?options.allowDots:defaults.allowDots,options.plainObjects="boolean"==typeof options.plainObjects?options.plainObjects:defaults.plainObjects,options.allowPrototypes="boolean"==typeof options.allowPrototypes?options.allowPrototypes:defaults.allowPrototypes,options.parameterLimit="number"==typeof options.parameterLimit?options.parameterLimit:defaults.parameterLimit,options.strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function(str,options){for(var obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),i=0;i<parts.length;++i){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;val=-1===pos?(key=options.decoder(part,defaults.decoder),options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder),options.decoder(part.slice(pos+1),defaults.decoder)),has.call(obj,key)?obj[key]=[].concat(obj[key]).concat(val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchProfileDataFile=function(){var dev=0<arguments.length&&void 0!==arguments[0]&&arguments[0],asJson=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],fetchFn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_isomorphicFetch2.default,profileUrl=dev?_constants.PROFILE_URL_DEV:_constants.PROFILE_URL_PROD;return fetchFn(profileUrl).then(function(res){if(200!==res.status)throw new _ExperimentException2.default("Could not fetch "+profileUrl+": Status code "+res.status);return asJson?res.json():res.text()})};var _isomorphicFetch2=_interopRequireDefault(__webpack_require__(224)),_constants=__webpack_require__(226),_ExperimentException2=_interopRequireDefault(__webpack_require__(45));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){__webpack_require__(225),module.exports=self.fetch.bind(self)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Headers",function(){return Headers}),__webpack_require__.d(__webpack_exports__,"Request",function(){return Request}),__webpack_require__.d(__webpack_exports__,"Response",function(){return Response}),__webpack_require__.d(__webpack_exports__,"DOMException",function(){return DOMException}),__webpack_require__.d(__webpack_exports__,"fetch",function(){return fetch});var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&-1<viewClasses.indexOf(Object.prototype.toString.call(obj))};function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return support.iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):Array.isArray(headers)?headers.forEach(function(header){this.append(header[0],header[1])},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){(this._bodyInit=body)?"string"==typeof body?this._bodyText=body:support.blob&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:support.formData&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():support.arrayBuffer&&support.blob&&function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}(body)?(this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))?this._bodyArrayBuffer=bufferClone(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return function(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(input,options){var body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"same-origin",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=function(method){var upcased=method.toUpperCase();return-1<methods.indexOf(upcased)?upcased:method}(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.signal=options.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function Response(bodyInit,options){options=options||{},this.type="default",this.status=void 0===options.status?200:options.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})};var DOMException=self.DOMException;try{new DOMException}catch(err){(DOMException=function(message,name){this.message=message,this.name=name;var error=Error(message);this.stack=error.stack}).prototype=Object.create(Error.prototype),DOMException.prototype.constructor=DOMException}function fetch(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted)return reject(new DOMException("Aborted","AbortError"));var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:function(rawHeaders){var headers=new Headers;return rawHeaders.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}}),headers}(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.onabort=function(){reject(new DOMException("Aborted","AbortError"))},xhr.open(request.method,request.url,!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)})}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PROFILE_URL_DEV="https://www.nike.com/assets/vendor/optimizely/dev/WtGdpBWFgvwRWRX2xGEGne.json",exports.PROFILE_URL_PROD="https://www.nike.com/assets/vendor/optimizely/prod/5aUCtZvFuDLjvdqdf2w53M.json"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _uxTreadOptimizely=__webpack_require__(81),_ExperimentException2=_interopRequireDefault(__webpack_require__(45)),_ExperimentError2=_interopRequireDefault(__webpack_require__(228)),_helpers=__webpack_require__(229),_logger2=_interopRequireDefault(__webpack_require__(80));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExperimentManager=function(){function ExperimentManager(optimizelyClient,experiments,dotcomNav){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExperimentManager),this.logger=(0,_logger2.default)(dotcomNav.env),this.dotcomNavInstance=dotcomNav,this.client=optimizelyClient,this.experiments=experiments,this.activeExperiments=[]}return _createClass(ExperimentManager,[{key:"runExperiment",value:function(experimentKey,argument_1){var variationKey=1<arguments.length&&void 0!==argument_1?argument_1:"Z";if(!variationKey)return this.die("No variation provided for "+experimentKey);this.logger.info("Running experiment "+experimentKey+":"+variationKey);var experiment=this.experiments[experimentKey];if(!experiment)return this.die("Experiment not found: "+experimentKey+":"+variationKey,experiment);try{return(0,_helpers.isControlVariation)(variationKey)?null:experiment.call(this,{experiment:experiment,experimentKey:experimentKey,variationKey:variationKey,manager:this})}catch(error){return this.die(error.message,experiment)}}},{key:"die",value:function(message,argument_1){var experiment=1<arguments.length&&void 0!==argument_1?argument_1:null;throw new _ExperimentException2.default(message,experiment,this)}},{key:"run",value:function(){var _this=this,userId=(0,_uxTreadOptimizely.getOptimizelyUserId)();if(!userId)return Promise.reject(this.die("No anonymousId value set"));if(!this.experimentKeys.length)return Promise.reject(this.logger.warn("No experiments to run"));var activationResult=(0,_uxTreadOptimizely.activateExperiments)(this.client,this.experimentKeys,userId,this.audienceAttributes);this.activeExperiments=Object.keys(activationResult).filter(function(key){return activationResult[key]}).map(function(key){return{experimentKey:key,variationKey:activationResult[key].toUpperCase()}});var promises=this.activeExperiments.map(function(experiment){var experimentKey=experiment.experimentKey,variationKey=experiment.variationKey;try{return _this.runExperiment(experimentKey,variationKey)}catch(error){return _this.handleError(error)}});return Promise.all(promises)}},{key:"handleError",value:function(error){if(error instanceof _ExperimentError2.default)throw error;return error instanceof _ExperimentException2.default?this.logger.warn(error.message):(error&&this.logger.error(error.message),null)}},{key:"experimentKeys",get:function(){return Object.keys(this.experiments)}},{key:"dataFile",get:function(){return this.client.configObj}},{key:"audienceAttributes",get:function(){try{return{country:this.dotcomNavInstance.locale.country.toLowerCase(),isDotcomNavTest:"true"}}catch(_ref){var message=_ref.message;return this.logger.warn("Couldn't get attributes: "+message)}}}]),ExperimentManager}();exports.default=ExperimentManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var obj,_extend2=__webpack_require__(79),_extend3=(obj=_extend2)&&obj.__esModule?obj:{default:obj};var ExperimentError=function(){function ExperimentError(message,experiment){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExperimentError);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExperimentError.__proto__||Object.getPrototypeOf(ExperimentError)).call(this,message));return _this.message=message,_this.experiment=experiment,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExperimentError,(0,_extend3.default)(Error)),_createClass(ExperimentError,[{key:"name",get:function(){return this.constructor.name}}]),ExperimentError}();exports.default=ExperimentError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getTemplate=function(id){var ident="object"===(void 0===id?"undefined":_typeof(id))?id.key:id,html=document.getElementById(ident).innerHTML,div=document.createElement("div");return div.innerHTML=html,div},exports.isControlVariation=function(variationKey){return"Z"===variationKey.toUpperCase()},exports.noop=function(){}},function(module,exports,__webpack_require__){"use strict";module.exports={}}]);